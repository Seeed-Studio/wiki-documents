"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[76412],{15680:(e,n,t)=>{t.d(n,{xA:()=>d,yg:()=>h});var a=t(96540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},g="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),g=u(t),m=r,h=g["".concat(s,".").concat(m)]||g[m]||p[m]||i;return t?a.createElement(h,o(o({ref:n},d),{},{components:t})):a.createElement(h,o({ref:n},d))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[g]="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=t[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},57335:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var a=t(58168),r=(t(96540),t(15680));const i={title:"Grove - I2C FM Receiver",nointro:null,keywords:["docs","docusaurus"],image:"https://wiki.seeedstudio.com/Grove-I2C_FM_Receiver/",slug:"/Grove-I2C_FM_Receiver",last_update:{date:"01/06/2022",author:"gunengyu"}},o=void 0,l={unversionedId:"Sensor/Grove/Grove_Sensors_Network/Standard_Protocol/Grove-I2C_FM_Receiver",id:"Sensor/Grove/Grove_Sensors_Network/Standard_Protocol/Grove-I2C_FM_Receiver",title:"Grove - I2C FM Receiver",description:"Grove - I2C FM Receiver is a wideband FM receiver module, this module is based on RDA5807M. The RDA5807M series are the latest generation single-chip broadcast FM stereo radio tuner with fully integrated synthesizer. The RDA5807M series have a powerful low-IF digital audio processor. The Grove - I2C FM Receiver has a headset jack, so it can connect to earphones or audio.",source:"@site/docs/Sensor/Grove/Grove_Sensors_Network/Standard_Protocol/Grove-I2C_FM_Receiver.md",sourceDirName:"Sensor/Grove/Grove_Sensors_Network/Standard_Protocol",slug:"/Grove-I2C_FM_Receiver",permalink:"/Grove-I2C_FM_Receiver",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/Grove/Grove_Sensors_Network/Standard_Protocol/Grove-I2C_FM_Receiver.md",tags:[],version:"current",lastUpdatedBy:"gunengyu",lastUpdatedAt:1641427200,formattedLastUpdatedAt:"Jan 6, 2022",frontMatter:{title:"Grove - I2C FM Receiver",nointro:null,keywords:["docs","docusaurus"],image:"https://wiki.seeedstudio.com/Grove-I2C_FM_Receiver/",slug:"/Grove-I2C_FM_Receiver",last_update:{date:"01/06/2022",author:"gunengyu"}},sidebar:"ProductSidebar",previous:{title:"Grove- I2C ADC",permalink:"/Grove-I2C_ADC"},next:{title:"Grove - I2C FM Receiver v1.1",permalink:"/Grove-I2C_FM_Receiver_v1.1"}},s={},u=[{value:"Version",id:"version",level:2},{value:"Features",id:"features",level:2},{value:"Platforms Supported",id:"platforms-supported",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Play With Arduino",id:"play-with-arduino",level:3},{value:"Hardware",id:"hardware",level:4},{value:"Software",id:"software",level:4},{value:"Schematic Online Viewer",id:"schematic-online-viewer",level:2},{value:"Resources",id:"resources",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:u},g="wrapper";function p(e){let{components:n,...t}=e;return(0,r.yg)(g,(0,a.A)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver/img/Grove-I2C_FM_Receiver_Photo.jpg",alt:null})),(0,r.yg)("p",null,"Grove - I2C FM Receiver is a wideband FM receiver module, this module is based on RDA5807M. The RDA5807M series are the latest generation single-chip broadcast FM stereo radio tuner with fully integrated synthesizer. The RDA5807M series have a powerful low-IF digital audio processor. The Grove - I2C FM Receiver has a headset jack, so it can connect to earphones or audio."),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/Grove-I2C-FM-Receiver-p-1953.html"},(0,r.yg)("img",{parentName:"a",src:"https://files.seeedstudio.com/wiki/common/Get_One_Now_Banner.png",alt:null}))),(0,r.yg)("h2",{id:"version"},"Version"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Version"),(0,r.yg)("th",{parentName:"tr",align:null},"Change"),(0,r.yg)("th",{parentName:"tr",align:null},"Release date"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Grove - I2C FM Receiver v1.0"),(0,r.yg)("td",{parentName:"tr",align:null},"Initial"),(0,r.yg)("td",{parentName:"tr",align:null},"May 18, 2017")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Grove - I2C FM Receiver v1.1"),(0,r.yg)("td",{parentName:"tr",align:null},"Change some components to make the board more stable"),(0,r.yg)("td",{parentName:"tr",align:null},"April 17, 2018")))),(0,r.yg)("h2",{id:"features"},"Features"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Grove interface"),(0,r.yg)("li",{parentName:"ul"},"Supports worldwide frequency band: 50 - 115MHz"),(0,r.yg)("li",{parentName:"ul"},"Support RDS/RBDS"),(0,r.yg)("li",{parentName:"ul"},"Lower power consumption"),(0,r.yg)("li",{parentName:"ul"},"Headset interface"),(0,r.yg)("li",{parentName:"ul"},"Digital auto gain control"),(0,r.yg)("li",{parentName:"ul"},"Input voltage: 3.3V - 5V")),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre"},"More details about Grove modules please refer to [Grove System](https://wiki.seeedstudio.com/Grove_System/)\n"))),(0,r.yg)("h2",{id:"platforms-supported"},"Platforms Supported"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Arduino"),(0,r.yg)("th",{parentName:"tr",align:null},"Raspberry Pi"),(0,r.yg)("th",{parentName:"tr",align:null}),(0,r.yg)("th",{parentName:"tr",align:null}),(0,r.yg)("th",{parentName:"tr",align:null}))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/arduino_logo.jpg",alt:null})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/raspberry_pi_logo_n.jpg",alt:null})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/bbg_logo_n.jpg",alt:null})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/wio_logo_n.jpg",alt:null})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/wiki_english/docs/images/linkit_logo_n.jpg",alt:null}))))),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre"},"The platforms mentioned above as supported is/are an indication of the module's software or theoritical compatibility. We only provide software library or code examples for Arduino platform in most cases. It is not possible to provide software library / demo code for all possible MCU platforms. Hence, users have to write their own software library.\n"))),(0,r.yg)("h2",{id:"getting-started"},"Getting Started"),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre"},"If this is the first time you work with Arduino, we strongly recommend you to see [Getting Started with Arduino](https://wiki.seeedstudio.com/Getting_Started_with_Arduino/) before the start.\n"))),(0,r.yg)("h3",{id:"play-with-arduino"},"Play With Arduino"),(0,r.yg)("h4",{id:"hardware"},"Hardware"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Materials required")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Seeeduino V4.2"),(0,r.yg)("th",{parentName:"tr",align:null},"Base Shield"),(0,r.yg)("th",{parentName:"tr",align:null},"Grove - I2C FM Receiver v1.1"),(0,r.yg)("th",{parentName:"tr",align:null},"Grove - Button x 2"),(0,r.yg)("th",{parentName:"tr",align:null},"Grove - Rotary Angle Sensor"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/Grove_Light_Sensor/images/gs_1.jpg",alt:"enter image description here"})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/Grove_Light_Sensor/images/gs_4.jpg",alt:"enter image description here"})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver_v1.1/img/thumbnail.jpg",alt:"enter image description here"})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver/img/bgpush%20_s.jpg",alt:"enter image description here"})),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("img",{parentName:"td",src:"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver/img/rotary_s.jpg",alt:"enter image description here"}))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{href:"https://www.seeedstudio.com/Seeeduino-V4.2-p-2517.html",target:"_blank"},"Get One Now")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{href:"https://www.seeedstudio.com/Base-Shield-V2-p-1378.html",target:"_blank"},"Get One Now")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{href:"https://www.seeedstudio.com/Grove-I2C-FM-Receiver-p-1953.html",target:"_blank"},"Get One Now")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://www.seeedstudio.com/Grove-Button-p-766.html"},"Get ONE Now")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://www.seeedstudio.com/Grove-Rotary-Angle-Sensor-p-770.html"},"Get ONE Now"))))),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre"},"**1** Please plug the USB cable gently, otherwise you may damage the port. Please use the USB cable with 4 wires inside, the 2 wires cable can't transfer data. If you are not sure about the wire you have, you can click [here](https://www.seeedstudio.com/Micro-USB-Cable-48cm-p-1475.html) to buy\n\n**2** Each Grove module comes with a Grove cable when you buy. In case you lose the Grove cable, you can click [here](https://www.seeedstudio.com/Grove-Universal-4-Pin-Buckled-20cm-Cable-%285-PCs-pack%29-p-936.html) to buy \n"))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 1.")," Connect Grove - I2C FM Receiver to port ",(0,r.yg)("strong",{parentName:"p"},"IIC")," of Grove-Base Shield.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 2.")," Connect Grove - Button 1 to ",(0,r.yg)("strong",{parentName:"p"},"D2")," port and connect Grove - Button 2 to ",(0,r.yg)("strong",{parentName:"p"},"D3")," port.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 3.")," Plug Grove - Base Shield into Seeeduino.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 4.")," Connect Seeeduino to PC via a USB cable."))),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver_v1.1/img/connect.jpg",alt:null})),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"}," If we don't have Grove Base Shield, We also can directly connect Grove - Temperature and Humidity Sensor Pro to Seeeduino as below.")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Seeeduino"),(0,r.yg)("th",{parentName:"tr",align:null},"Grove - I2C FM Receiver v1.1"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"5V"),(0,r.yg)("td",{parentName:"tr",align:null},"Red")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"GND"),(0,r.yg)("td",{parentName:"tr",align:null},"Black")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"SDA"),(0,r.yg)("td",{parentName:"tr",align:null},"White")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"SCL"),(0,r.yg)("td",{parentName:"tr",align:null},"Yellow")))),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Seeeduino"),(0,r.yg)("th",{parentName:"tr",align:null},"Grove - Button 1"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"5V"),(0,r.yg)("td",{parentName:"tr",align:null},"Red")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"GND"),(0,r.yg)("td",{parentName:"tr",align:null},"Black")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Null"),(0,r.yg)("td",{parentName:"tr",align:null},"White")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"D2"),(0,r.yg)("td",{parentName:"tr",align:null},"Yellow")))),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Seeeduino"),(0,r.yg)("th",{parentName:"tr",align:null},"Grove - Button 2"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"5V"),(0,r.yg)("td",{parentName:"tr",align:null},"Red")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"GND"),(0,r.yg)("td",{parentName:"tr",align:null},"Black")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Null"),(0,r.yg)("td",{parentName:"tr",align:null},"White")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"D3"),(0,r.yg)("td",{parentName:"tr",align:null},"Yellow")))),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Seeeduino"),(0,r.yg)("th",{parentName:"tr",align:null},"Grove - Rotary Angle Sensor"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"5V"),(0,r.yg)("td",{parentName:"tr",align:null},"Red")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"GND"),(0,r.yg)("td",{parentName:"tr",align:null},"Black")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Null"),(0,r.yg)("td",{parentName:"tr",align:null},"White")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"A0"),(0,r.yg)("td",{parentName:"tr",align:null},"Yellow")))),(0,r.yg)("h4",{id:"software"},"Software"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 1.")," Download ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/mathertel/Radio/"},"Grove-I2C FM Receiver library")," and then install library.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 2.")," Refer to ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/How_to_install_Arduino_Library"},"How to install library")," to install library for Arduino.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 3.")," Copy the following code into you Arduino IDE, then save and compile."))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-c++"},'\n/*\n * I2C_FM.ino\n * Demo code for the Grove-I2C_FM_Receiver module\n *\n * Copyright (c) 2012 seeed technology inc.\n * Author     : Jack Shao (jacky.shaoxg@gmail.com)\n * Create Time: Jul 2014\n * Change Log :\n *\n * The MIT License (MIT)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n//\n/*\n * Modifications to the I2C_FM.ino by Mel Patrick - Wabbit Wanch Design\n * Modified routines for scanning UP or DOWN through the FM band\n * Modified routine to test for signal strength of received station\n * Modified routines to support bass boost and MONO signal\n * RSSI, read it too soon after setting a station and you get a small value\n * so it\'s better to wait a bit (50ms) and try it. minSignalStrength will\n * skip locking on a station with a weak signal (you could set the MONO bit) to get\n * better reception on these stations.\n */\n#include <Arduino.h>\n#include <Wire.h>\n#include <EEPROM.h>\n\n#define BTNUP          2// used for seeking UP (normally CLOSED push button)\n#define VOL_POT        A0// volume POT LOG taper 10K\n#define BTNDN          3// used for seeking DOWN (normally CLOSED push button)\n\nuint16_t gChipID = 0;\nuint8_t RDA5807P_REGW[10];\n\n#define I2C_ADDR       0x10\n\n#define READ         1\n#define WRITE         0\n\n#define ADRW          0x20\n#define ADRR          0x21\n//\n\n//#define                 _SHARE_CRYSTAL_24MHz_\n//#define                 _SHARE_CRYSTAL_12MHz_\n#define                 _SHARE_CRYSTAL_32KHz_\n//#define                 _FM_STEP_50K_\n\n//5807M,5807FP,5807NN,5807NP\nuint8_t RDA5807N_initialization_reg[]={\n#if defined(_SHARE_CRYSTAL_24MHz_)\n  0xC4, 0x51, //02H:\n#elif defined(_SHARE_CRYSTAL_12MHz_)\n  0xC4, 0x11, //02H:\n#elif defined(_SHARE_CRYSTAL_32KHz_)\n  0xC4, 0x01,//change 01 to 05 enables the RDS/RBDS\n#else\n  0xC0, 0x01,\n#endif\n  0x00, 0x00,\n  0x04, 0x00,\n  0xC3, 0xad,  //05h\n  0x60, 0x00,\n  0x42, 0x12,\n  0x00, 0x00,\n  0x00, 0x00,\n  0x00, 0x00,  //0x0ah\n  0x00, 0x00,\n  0x00, 0x00,\n  0x00, 0x00,\n  0x00, 0x00,\n  0x00, 0x00,\n  0x00, 0x00,  //0x10h\n  0x00, 0x19,\n  0x2a, 0x11,\n  0xB0, 0x42,\n  0x2A, 0x11,  //\n  0xb8, 0x31,  //0x15h\n  0xc0, 0x00,\n  0x2a, 0x91,\n  0x94, 0x00,\n  0x00, 0xa8,\n  0xc4, 0x00,  //0x1ah\n  0xF7, 0xcF,\n  0x12, 0x14,  //0x1ch\n  0x80, 0x6F,\n  0x46, 0x08,\n  0x00, 0x86,  //10000110\n  0x06, 0x61,  //0x20H\n  0x00, 0x00,\n  0x10, 0x9E,\n  0x23, 0xC8,\n  0x04, 0x06,\n  0x0E, 0x1C,  //0x25H     //0x04 0x08\n};\n\nint16_t freq = 10110;\nuint16_t vol = 1;\n//\n// added items - Mel\nboolean bassBit = true;// bass boost\nboolean monoBit = false;// force MONO not stereo\nconst boolean seekUP = true;\nconst boolean seekDN = false;\nuint8_t minSignalStrength = 36;// anything below this probably set a MONO flag for better reception\nuint8_t signalStrength;\nlong previousMillis = 0;// last time the function was called\nlong interval = 2000;// interval for the signal level function (2 seconds)\nint8_t stationStep = 10;// kHz steps bewteen the stations (North America = 10)\nboolean hasVolumePot = true;// flag if you have a POT attached or not\n//\nvoid setup()\n{\n  Wire.begin();\n  loadDefaults();// load any defaults from previous radio settings\n  Serial.begin(9600);\n  Serial.println("Started");\n  //=======================\n  //rda5807 power on\n  RDA5807P_PowerOnReset();\n  RDA5807P_SetMute(false);\n\n  //=======================\n  pinMode(BTNUP, INPUT_PULLUP);\n  pinMode(VOL_POT, INPUT);\n  pinMode(BTNDN, INPUT_PULLUP);\n  //=======================\n  RDA5807P_SetVolumeLevel(vol);// use this if you don\'t have a POT for volume attached (0-15)\n  RDA5807P_SetFreq( freq );\n}\n\nvoid loop()\n{\n  unsigned long currentMillis = millis();\n\n  if(currentMillis - previousMillis > interval) {\n    // save the last time you blinked the LED\n    previousMillis = currentMillis;\n    showSignalStrength();\n  }\n  //\n  if (digitalRead(BTNUP) == 1)\n  {\n    delay(100);\n    if (digitalRead(BTNUP) == 1)\n      fmSeek(seekUP);\n    while(digitalRead(BTNUP) == 1);\n  }\n  if (digitalRead(BTNDN) == 1)\n  {\n    delay(100);\n    if (digitalRead(BTNDN) == 1)\n      fmSeek(seekDN);\n    while(digitalRead(BTNDN) == 1);\n  }\n  if (hasVolumePot == true) setVolume();// use this to read the POT\n}\n//\nvoid setVolume() {\n  unsigned int temp_vol;\n  temp_vol = analogRead( VOL_POT );\n  if (abs(temp_vol - vol)>5)\n  {\n    if (vol != temp_vol) {// don\'t bother changing the volume if unless the pot moves\n      vol = temp_vol;\n      unsigned char hex_vol = map(vol, 0, 1023, 0, 0xf);\n      RDA5807P_SetVolumeLevel(hex_vol);\n      saveDefaults();// save new volume to EEPROM\n    }\n  }\n}\n//\nvoid fmSeek(boolean theDir) {\n  int signalStrength;\n  if (!theDir) {\n    Serial.println("Start seeking down...");\n  }\n  else\n  {\n    Serial.println("Start seeking up...");\n  }\n  do {\n    do{\n      if (theDir == seekUP) {\n        freq += stationStep;\n      }\n      else\n      {\n        freq -= stationStep;\n      }\n      if (freq > 10800) freq = 8800;\n      if (freq < 8800) freq = 10800;\n      //Serial.println(freq);\n    }\n    while(!RDA5807P_ValidStop(freq));\n    delay(50);\n    signalStrength = RDA5807P_GetSigLvl(freq);// max is 63 according to Data sheet, but I\'ve seen more\n  }\n  while (signalStrength < minSignalStrength);// minimum signal strength, keep looking\n  showRadioStation();\n  saveDefaults();// save new station selection to EEPROM\n}\n//\nvoid showRadioStation() {\n  Serial.print("Stable Freq:");\n  Serial.print(((float)freq)/100.0f);\n  Serial.println("MHz");\n}\n//\nvoid showSignalStrength() {\n  signalStrength = RDA5807P_GetSigLvl(freq);// max is 63...as noted\n  Serial.print("Signal Strength: ");\n  Serial.println(signalStrength);\n}\n\n//===========================================================\n// FM functions\n//===========================================================\nunsigned char OperationRDAFM_2w(unsigned char operation, unsigned char *data, int numBytes)\n{\n  if(operation == READ)\n  {\n    Wire.requestFrom(I2C_ADDR, numBytes);\n    for(int i=0;i<numBytes;i++)\n    {\n      *data++ = Wire.read();\n    }\n  }\n  else\n  {\n    Wire.beginTransmission(I2C_ADDR);\n    for(int i=0;i<numBytes;i++)\n    {\n      Wire.write(*data++);\n    }\n    Wire.endTransmission();\n  }\n  return 0;\n}\n\n\n/**\n * @brief Reset RDA5807P while power on RDA5807P\n * @author RDA RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param void\n * @return void\n * @retval\n */\nvoid  RDA5807P_PowerOnReset(void)\n{\n  RDA5807P_Intialization();\n}\n\n/**\n * @brief RDA5807P power off function\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param void\n * @return void\n * @retval\n */\nvoid  RDA5807P_PowerOffProc(void)\n{\n  RDA5807P_REGW[1] &= (~1);\n  OperationRDAFM_2w(WRITE, &(RDA5807P_REGW[0]), 2);\n}\n\n/**\n * @brief Set RDA5807P into mute mode\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param bool mute: if mute is true,then set mute; if mute is false,then set no mute\n * @return void\n * @retval\n */\nvoid RDA5807P_SetMute(boolean mute)\n{\n  if(mute)\n    RDA5807P_REGW[0] &=  ~(1<<6);\n  else\n    RDA5807P_REGW[0] |= 1<<6;\n  RDA5807P_REGW[0] |= monoBit<<5;\n  RDA5807P_REGW[0] |= bassBit<<4;\n  OperationRDAFM_2w(WRITE, &(RDA5807P_REGW[0]), 2);//RDA5807M_REGW\n  delay(50);    //Dealy 50 ms\n}\n//\n/*************************************************\n * @brief Set frequency function\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param int16_t curFreq:frequency value\n * @return void\n * @retval\n ***********************************************/\nvoid RDA5807P_SetFreq(int16_t curFreq)\n{\n  uint16_t curChan;\n  curChan=RDA5807P_FreqToChan(curFreq);\n\n  if((curFreq >= 6500)&&(curFreq < 7600))\n  {\n    RDA5807P_REGW[3] = 0x0c;\n  }\n  else if((curFreq >= 7600)&&(curFreq < 10800))\n  {\n    RDA5807P_REGW[3] = 0x08;// sets the BAND bits (00xx = 87-108, 01xx=76-91, 10xx=76-108, 11xx=65-76\n    // for north america this must be set to 10xx for some unknown reason\n  }\n  //SetNoMute\n  RDA5807P_REGW[0] |= 1<<6;\n  RDA5807P_REGW[0] |= monoBit<<5;\n  RDA5807P_REGW[0] |= bassBit<<4;\n  //handleBits();\n  RDA5807P_REGW[2]=curChan>>2;\n  RDA5807P_REGW[3]=(((curChan&0x0003)<<6)|0x10) | (RDA5807P_REGW[3]&0x0f);    //set tune bit\n\n  OperationRDAFM_2w(WRITE, &(RDA5807P_REGW[0]), 4);\n  delay(50);     //Delay five ms\n  showRadioStation();\n}\n//\n/**\n * @brief Station judge for auto search\n * @In auto search mode,uses this function to judge the frequency if has a station\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param int16_t freq:frequency value\n * @return bool: if return true,the frequency has a true station;otherwise doesn\'t have a station\n * @retval\n */\nboolean RDA5807P_ValidStop(int freq)\n{\n  uint8_t RDA5807P_reg_data[4]={\n    0                                                  };\n  uint8_t falseStation = 0;\n  uint8_t i=0;\n  uint16_t curChan;\n\n  if((freq >= 6500)&&(freq < 7600))\n  {\n    RDA5807P_REGW[3] = 0x0c;\n  }\n  else if((freq >= 7600)&&(freq < 10800))\n  {\n    RDA5807P_REGW[3] = 0x08;// sets the BAND bits (00xx = 87-108, 01xx=76-91, 10xx=76-108, 11xx=65-76\n    // for north america this must be set to 10xx for some unknown reason\n  }\n  curChan=RDA5807P_FreqToChan(freq);\n  //SetNoMute bit 9 is seek direction (0=seek down, 1=seek up).\n  //02H 14\n  RDA5807P_REGW[0] |= 1<<6;// reg zero is bits 15 to bit 8 (this shifts to bit 14)\n  RDA5807P_REGW[0] |= monoBit<<5;\n  RDA5807P_REGW[0] |= bassBit<<4;\n  //handleBits();\n  RDA5807P_reg_data[0]=RDA5807P_REGW[0];\n  RDA5807P_reg_data[1]=RDA5807P_REGW[1];\n  RDA5807P_reg_data[2]=curChan>>2;//03H 15:8 CHAN\n  RDA5807P_reg_data[3]=(((curChan&0x0003)<<6)|0x10) | (RDA5807P_REGW[3]&0x0f);//\n  OperationRDAFM_2w(WRITE,&(RDA5807P_reg_data[0]), 4);\n\n  delay(50);    //Dealy 25 ms\n\n  if (0x5808 == gChipID)\n    OperationRDAFM_2w(READ,&(RDA5807P_reg_data[0]), 4); //\n  else\n  {\n    do\n    {\n      i++;\n      if(i>5) return 0;\n\n      delay(30);\n      //read REG0A&0B\n      OperationRDAFM_2w(READ,&(RDA5807P_reg_data[0]), 4);\n    }\n    while((RDA5807P_reg_data[0]&0x40)==0);\n  }\n\n  //check FM_TRUE\n  if((RDA5807P_reg_data[2] &0x01)==0) falseStation=1;//0B 8  FM TRUE\n\n  if(freq==9600) falseStation=1;// North America - if scanning DOWN, the radio will lock on 9600 for some reason!\n  delay(50);\n  if (falseStation==1)\n    return 0;\n  else\n    return 1;\n}\n\n/**\n * @brief Get the signal level(RSSI) of the current frequency\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param int16_t curf:frequency value\n * @return uint8_t: the signal level(RSSI)\n * @retval\n */\nuint8_t RDA5807P_GetSigLvl( int16_t curf )\n{\n  uint8_t RDA5807P_reg_data[4]={\n    0                                                  };\n  OperationRDAFM_2w(READ,&(RDA5807P_reg_data[0]), 4);\n  delay(50);    //Delay 50 ms\n  return  (RDA5807P_reg_data[2]>>1);  /*??rssi*/\n}\n\n/**\n * @brief Set FM volume\n * @It has better use the system volume operation to replace this function\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param uint8_t level: volume value\n * @return void\n * @retval\n */\nvoid RDA5807P_SetVolumeLevel(uint8_t level)\n{\n  uint8_t RDA5807P_reg_data[8];\n  uint8_t i = 0;\n\n  for (i=0;i<8;i++)\n    RDA5807P_reg_data[i] = RDA5807P_REGW[i];\n\n  RDA5807P_reg_data[7]=(( RDA5807P_REGW[7] & 0xf0 ) | (level & 0x0f));\n\n  RDA5807P_reg_data[3] &= (~(0x10));//disable tune\n\n  OperationRDAFM_2w(WRITE, &(RDA5807P_reg_data[0]), 8);\n  delay(50);    //Dealy 50 ms\n}\n\n/**\n * @brief Initialize RDA5807P\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param void\n * @return bool:if true,the operation is successful;otherwise is failed\n * @retval\n **/\nboolean  RDA5807P_Intialization(void)\n{\n  uint8_t error_ind = 0;\n  uint8_t RDA5807P_REGR[10]={\n    0x0                                                  };\n  uint8_t i = 0;\n\n  RDA5807P_REGW[0] = 0x00;\n  RDA5807P_REGW[0] |= monoBit<<5;\n  RDA5807P_REGW[0] |= bassBit<<4;\n  RDA5807P_REGW[1] = 0x02;\n\n  error_ind = OperationRDAFM_2w(WRITE, (uint8_t *)&RDA5807P_REGW[0], 2);//soft reset\n  delay(50);\n\n  error_ind = OperationRDAFM_2w(READ, (uint8_t *)&RDA5807P_REGR[0], 10);\n  delay(50);\n\n  gChipID = RDA5807P_REGR[8];\n  gChipID = ((gChipID << 8) | RDA5807P_REGR[9]);\n\n  Serial.print("Chip ID: 0x");\n  Serial.println(gChipID, HEX);\n\n  for (i=0;i<8;i++) {\n    RDA5807P_REGW[i] = RDA5807N_initialization_reg[i];\n  }\n\n  error_ind = OperationRDAFM_2w(WRITE, (uint8_t *)&RDA5807N_initialization_reg[0], 2); //power up\n  delay(600);\n  //Serial.println(sizeof(RDA5807N_initialization_reg));\n  error_ind = OperationRDAFM_2w(WRITE, (uint8_t *)&RDA5807N_initialization_reg[0], sizeof(RDA5807N_initialization_reg));\n\n  delay(50);         //Dealy 50 ms\n\n  if (error_ind )\n    return 0;\n  else\n    return 1;\n}\n//\n/**\n * @brief Cover the frequency to channel value\n * @author RDA Ri\'an Zeng\n * @date 2008-11-05\n * @param uint16 frequency:covered frequency\n * @return uint16: channel value\n * @retval\n * In the United States, frequency-modulated broadcasting stations operate in a frequency band extending from 87.8 MHz to 108.0 MHz,\n * for a total of 20.2 MHz. It is divided into 101 channels, each 0.2 MHz wide, designated "channel 200" through "channel 300."\n * In actual practice, no one (except the FCC) uses these channel numbers; the frequencies are used instead.\n */\nuint16_t RDA5807P_FreqToChan(uint16_t frequency) {\n  uint8_t channelSpacing = 10;\n  uint16_t channel = 0;\n\n  if((frequency >= 6500)&&(frequency < 7600))\n  {\n    channel = (frequency - 6500)/channelSpacing;\n  }\n  else if((frequency >= 7600)&&(frequency < 10800))\n  {\n    channel = (frequency - 7600)/channelSpacing;\n  }\n  return (channel);\n}\n//\nvoid loadDefaults() {\n  char myCode[9] = "Grove_FM";\n  char myInit[9] = "blank123";\n  /*\n  * byte map in EEPROM\n   * 8, 9 the default frequency for a reboot\n   * 10, 11 current preset volume of the radio (used if no pot is attached)\n   */\n  for (int i=0; i < 8; i++) {\n    myInit[i] = EEPROM.read(i);// read out to see if the thing is INITIALIZED\n  }\n  if (strcmp(myCode, myInit) == 0) {// if this is ZERO (we previously wrote some), then read the values\n    freq = epReadINT(8);// read back the INT for frequency from eeprom 8 and 9 (two bytes for an INT)\n    if (!hasVolumePot) vol = epReadINT(10);// read back the volume setting but don\'t use it unless flag is false\n  }\n  else// we don\'t have any defaults, so we have to save some first\n  {\n    for (int i=0; i < 8; i++) {\n      EEPROM.write(i, myCode[i]);// write this to EEPROM to show we have it saved\n    }\n    saveDefaults();// write the current default settings\n  }\n}\n//\nvoid saveDefaults() {\n  epWriteINT(8, freq);// write the two bytes for INT for a reboot\n  epWriteINT(10, vol);// write the current volume POT setting\n}\n//\nvoid epWriteINT(int where, int theVal) {\n  union uData\n  {\n    byte stuff[2];\n    int f1;// 2 bytes of memory\n  }\n  u;\n  u.f1 = theVal;// copy into the union\n  for (int j=0; j < 2; j++) {// now we have to write out 2 bytes of memory\n    EEPROM.write(where + j, u.stuff[j]);// write it to EEPROM\n  }\n}\n//\nlong epReadINT(int where) {\n  union uData\n  {\n    byte stuff[2];\n    int f1;// 2 bytes of memory\n  }\n  u;\n  for (int j=0; j < 2; j++) {\n    u.stuff[j]=EEPROM.read(where + j);// read back the 2 bytes at this memory location\n  }\n  return u.f1;\n}\n//\nvoid epWriteLong(int where, long theVal) {\n  union uData\n  {\n    byte stuff[4];\n    long f1;// 4 bytes of memory\n  }\n  u;\n  u.f1 = theVal;// copy into the union\n  for (int j=0; j < 4; j++) {// now we have to write out 4 bytes of memory\n    EEPROM.write(where + j, u.stuff[j]);// write it to EEPROM\n  }\n}\n//\nlong epReadLong(int where) {\n  union uData\n  {\n    byte stuff[4];\n    long f1;// 4 bytes of memory\n  }\n  u;\n  for (int j=0; j < 4; j++) {\n    u.stuff[j]=EEPROM.read(where + j);// read back the 4 bytes to this memory location\n  }\n  return u.f1;\n}\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 4.")," Upload the demo. If you do not know how to upload the code, please check ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Upload_Code/"},"How to upload code"),".")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 5.")," Open the ",(0,r.yg)("strong",{parentName:"p"},"Serial Monitor")," of Arduino IDE by click ",(0,r.yg)("strong",{parentName:"p"},"Tool-> Serial Monitor"),". Or tap the ++ctrl+shift+m++ key at the same time. if every thing goes well, you will get the result."))),(0,r.yg)("p",null,"The result should be like:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"\nStarted\nChip ID: 0x5808\nStable Freq:102.60MHz\nSignal Strength: 46\nSignal Strength: 46\nSignal Strength: 45\nSignal Strength: 45\nSignal Strength: 45\nSignal Strength: 45\nStart seeking down...\nStable Freq:94.00MHz\nSignal Strength: 44\nSignal Strength: 51\nSignal Strength: 51\nSignal Strength: 50\nSignal Strength: 50\nSignal Strength: 51\n\n\n")),(0,r.yg)("p",null,"Now you can hear the FM station, and you can press the ",(0,r.yg)("inlineCode",{parentName:"p"},"Grove- button 1")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"Grove- button 2")," to change the radio stations. And you can rotate the ",(0,r.yg)("inlineCode",{parentName:"p"},"Grove - Rotary Angle Sensor")," to adjust the volume."),(0,r.yg)("p",null,"Have fun~"),(0,r.yg)("h2",{id:"schematic-online-viewer"},"Schematic Online Viewer"),(0,r.yg)("div",{className:"altium-ecad-viewer","data-project-src":"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver/res/Grove_I2C_FM_Receiver_v1.0.zip",style:{borderRadius:"0px 0px 4px 4px",height:500,borderStyle:"solid",borderWidth:1,borderColor:"rgb(241, 241, 241)",overflow:"hidden",maxWidth:1280,maxHeight:700,boxSizing:"border-box"}}),(0,r.yg)("h2",{id:"resources"},"Resources"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"[Zip]")," ",(0,r.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver/res/Grove_I2C_FM_Receiver_v1.0.zip"},"Grove - I2C FM Receiver v1.0 Eagle File")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"[PDF]")," ",(0,r.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Grove-I2C_FM_Receiver_v1.1/res/RDA5807%20Datasheet.pdf"},"RDA5807 Datasheet"))),(0,r.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,r.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,r.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,r.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}p.isMDXComponent=!0}}]);