"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[57883],{15680:(e,t,r)=>{r.d(t,{xA:()=>l,yg:()=>m});var o=r(96540);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=o.createContext({}),p=function(e){var t=o.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,l=d(e,["components","mdxType","originalType","parentName"]),c=p(r),g=n,m=c["".concat(s,".").concat(g)]||c[g]||u[g]||a;return r?o.createElement(m,i(i({ref:t},l),{},{components:r})):o.createElement(m,i({ref:t},l))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=g;var d={};for(var s in t)hasOwnProperty.call(t,s)&&(d[s]=t[s]);d.originalType=e,d[c]="string"==typeof e?e:n,i[1]=d;for(var p=2;p<a;p++)i[p]=r[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}g.displayName="MDXCreateElement"},81761:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>d,toc:()=>p});var o=r(58168),n=(r(96540),r(15680));const a={description:"This wiki provides a comprehensive guide to working with the reComputer R1000, an industrial IoT edge controller based on the Raspberry Pi 4. It includes instructions for setting up Node-RED, simulating room temperatures with YABE, and discovering and reading BACnet IP device parameters for efficient Building Management System (BMS) integration.",title:"reComputer R1000 with Node-Red and BACnet IP",keywords:["Edge Controller","reComputer R1000","Node-Red","Bacnet"],image:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",slug:"/reComputer_r1000_node_red_bacnet_ip",last_update:{date:"06/20/2024",author:"ShuishengPeng"}},i=void 0,d={unversionedId:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Node-RED/recomputer_r1000_with_node_red_and_bacnet",id:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Node-RED/recomputer_r1000_with_node_red_and_bacnet",title:"reComputer R1000 with Node-Red and BACnet IP",description:"This wiki provides a comprehensive guide to working with the reComputer R1000, an industrial IoT edge controller based on the Raspberry Pi 4. It includes instructions for setting up Node-RED, simulating room temperatures with YABE, and discovering and reading BACnet IP device parameters for efficient Building Management System (BMS) integration.",source:"@site/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Node-RED/recomputer_r1000_with_node_red_and_bacnet.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Node-RED",slug:"/reComputer_r1000_node_red_bacnet_ip",permalink:"/reComputer_r1000_node_red_bacnet_ip",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/Node-RED/recomputer_r1000_with_node_red_and_bacnet.md",tags:[],version:"current",lastUpdatedBy:"ShuishengPeng",lastUpdatedAt:1718841600,formattedLastUpdatedAt:"Jun 20, 2024",frontMatter:{description:"This wiki provides a comprehensive guide to working with the reComputer R1000, an industrial IoT edge controller based on the Raspberry Pi 4. It includes instructions for setting up Node-RED, simulating room temperatures with YABE, and discovering and reading BACnet IP device parameters for efficient Building Management System (BMS) integration.",title:"reComputer R1000 with Node-Red and BACnet IP",keywords:["Edge Controller","reComputer R1000","Node-Red","Bacnet"],image:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",slug:"/reComputer_r1000_node_red_bacnet_ip",last_update:{date:"06/20/2024",author:"ShuishengPeng"}},sidebar:"ProductSidebar",previous:{title:"reComputer R1000 with Node Red and Modbus TCP",permalink:"/recomputer_r1000_node_red_modbus_tcp"},next:{title:"reComputer R1000 act as OPC UA server with Node-RED",permalink:"/recomputer_r1000_nodered_opcua_server"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Getting Start",id:"getting-start",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:3},{value:"Software Preparation",id:"software-preparation",level:3},{value:"Node download",id:"node-download",level:3},{value:"YABE",id:"yabe",level:3},{value:"Start Room Temperature Controller Simulator",id:"start-room-temperature-controller-simulator",level:2},{value:"The process of Node-red reading BACnet devices",id:"the-process-of-node-red-reading-bacnet-devices",level:2},{value:"Step 1: Search for Devices",id:"step-1-search-for-devices",level:3},{value:"Step 2:Read data",id:"step-2read-data",level:3},{value:"Step 3:Filter data",id:"step-3filter-data",level:3},{value:"Step 4:Loop reading",id:"step-4loop-reading",level:3},{value:"Step 5:Data Display",id:"step-5data-display",level:3},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],l={toc:p},c="wrapper";function u(e){let{components:t,...r}=e;return(0,n.yg)(c,(0,o.A)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h2",{id:"introduction"},"Introduction"),(0,n.yg)("p",null,"BACnet IP (Building Automation and Control Network over IP) is a communication protocol designed for managing and automating building systems. It enables devices from different manufacturers to interoperate seamlessly over standard IP networks, enhancing system integration and flexibility. The primary advantages of BACnet IP in Building Management Systems (BMS) include improved scalability, easier installation and maintenance, and the ability to leverage existing network infrastructure. BACnet IP also supports real-time data exchange, facilitating better monitoring and control of building systems. This results in increased energy efficiency, reduced operational costs, and enhanced occupant comfort and safety."),(0,n.yg)("p",null,"This tutorial shows the process of using node-red to read BACnet device data on reComputer R1000 and perform real-time visual display.We used a BACnet device simulator on the W10 PC to simulate the real BACnet device. The reComputer R1000 and the W10 PC were connected to the same router to ensure that they were on the same network segment, and then the data was read and displayed."),(0,n.yg)("h2",{id:"getting-start"},"Getting Start"),(0,n.yg)("p",null,"Before you start this project, you may need to prepare your hardware and software in advance as described here."),(0,n.yg)("h3",{id:"hardware-preparation"},"Hardware Preparation"),(0,n.yg)("div",{class:"table-center"},(0,n.yg)("table",{class:"table-nobg"},(0,n.yg)("tr",{class:"table-trnobg"},(0,n.yg)("th",{class:"table-trnobg"},"reComputer R1000")),(0,n.yg)("tr",{class:"table-trnobg"}),(0,n.yg)("tr",{class:"table-trnobg"},(0,n.yg)("td",{class:"table-trnobg"},(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",style:{width:300,height:"auto"}})))),(0,n.yg)("tr",{class:"table-trnobg"}),(0,n.yg)("tr",{class:"table-trnobg"},(0,n.yg)("td",{class:"table-trnobg"},(0,n.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,n.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/reComputer-R1025-10-p-5895.html"},(0,n.yg)("strong",null,(0,n.yg)("span",null,(0,n.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,n.yg)("h3",{id:"software-preparation"},"Software Preparation"),(0,n.yg)("p",null,"reComputer R1000 comes to your hand pre-installed with Raspberry Pi OS. If you are booting this device for the first time, please read our ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reComputer_r/"},"Getting Started Wiki"),". For information about node-red, you can refer to the ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Edge-Box-Getting-Started-with-Node-Red/"},"following posts"),". It is recommended that you review this guide before proceeding to the wiki. In this tutorial, we are going to connect the Host PC running the YABE room temperature simulator with Node-RED running on reComputer R1000."),(0,n.yg)("h3",{id:"node-download"},"Node download"),(0,n.yg)("p",null,"This tutorial uses the ",(0,n.yg)("strong",{parentName:"p"},'"node-bacnet-contrib-extended"')," node, ",(0,n.yg)("strong",{parentName:"p"},'"node-red-contrib-loop"')," node, and ",(0,n.yg)("strong",{parentName:"p"},'"node-red-dashboard"')," node. Please download them before starting. For how to download nodes, you can refer to ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Edge-Box-Getting-Started-with-Node-Red/"},"Tutorial"),"."),(0,n.yg)("h3",{id:"yabe"},"YABE"),(0,n.yg)("p",null,"Please go to this ",(0,n.yg)("a",{parentName:"p",href:"https://sourceforge.net/projects/yetanotherbacnetexplorer/"},"link")," and download YABE (Yet Another BACnet Explorer). YABE is a versatile tool that allows you to simulate and explore BACnet devices, making it ideal for testing and development purposes. Once downloaded and installed on your Host PC, YABE will be used to simulate room temperature data, which we will then read and process using Node-RED on the reComputer R1000."),(0,n.yg)("h2",{id:"start-room-temperature-controller-simulator"},"Start Room Temperature Controller Simulator"),(0,n.yg)("p",null,"Once you have installed YABE, navigate to the ",(0,n.yg)("inlineCode",{parentName:"p"},"add-on")," folder and double-click ",(0,n.yg)("inlineCode",{parentName:"p"},"bacnet.Room.Simulator")," to start it. "),(0,n.yg)("center",null,(0,n.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/room-simulator.PNG"})),(0,n.yg)("p",null,"Once done, you need to start YABE."),(0,n.yg)("center",null,(0,n.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/Yabe-app.png"})),(0,n.yg)("p",null,"Then, click on the ",(0,n.yg)("inlineCode",{parentName:"p"},"+"),' mark to add a device and enter the IP address of your PC\'s Ethernet port. Click on "Start."'),(0,n.yg)("center",null,(0,n.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/YABE-config.PNG"})),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"You might need to configure the Ethernet port IP address to ensure it is in the same network domain as both the reComputer and your PC.")),(0,n.yg)("p",null,"After that, you should be able to see the device with the same device ID as the room temperature simulator."),(0,n.yg)("center",null,(0,n.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/simulator&YABE.PNG"})),(0,n.yg)("h2",{id:"the-process-of-node-red-reading-bacnet-devices"},"The process of Node-red reading BACnet devices"),(0,n.yg)("p",null,"After opening RoomSimulator, you have a BACnet device. The following steps can read the data of the device through Node-red and display it."),(0,n.yg)("h3",{id:"step-1-search-for-devices"},"Step 1: Search for Devices"),(0,n.yg)("p",null,"First, you need to get the location of the BACnet device. You can use the ",(0,n.yg)("inlineCode",{parentName:"p"},'"discover-devices"')," node to achieve this. It can search for all BACnet devices connected to you and display the IP address and device number."),(0,n.yg)("center",null,(0,n.yg)("img",{width:800,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/Node_red_pic/1Search_device.gif"})),(0,n.yg)("h3",{id:"step-2read-data"},"Step 2:Read data"),(0,n.yg)("p",null,"After getting the device address, you can communicate with the corresponding device. This example uses ",(0,n.yg)("inlineCode",{parentName:"p"},'"read-single-device"')," to read all the data in a device. The node needs the address and device number of the device. These two pieces of information can be obtained from the first step. We can use the ",(0,n.yg)("inlineCode",{parentName:"p"},'"function"')," node to obtain these two information and input it to the ",(0,n.yg)("inlineCode",{parentName:"p"},'"read-single-device"')," node to read the device data. You can copy the path of the deviceID and Address attributes in the debug window on the right, and then assign them to the variables in ",(0,n.yg)("inlineCode",{parentName:"p"},'"function"'),", so that you can accurately get the address and device number of the device."),(0,n.yg)("center",null,(0,n.yg)("img",{width:800,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/Node_red_pic/2ReadSingleDevice.gif"})),(0,n.yg)("h3",{id:"step-3filter-data"},"Step 3:Filter data"),(0,n.yg)("p",null,'There are a lot of data items read in the second step. We need to process them to get the data items we want. Here we extract three temperature data, namely "Tempture indoor", "Tempture outdoor", "Tempture Water" is the same as the second step. We copy the path of the corresponding data item in the debug window, and then extract it in the ',(0,n.yg)("inlineCode",{parentName:"p"},'"function"')," node. After that, we can use these three items of data."),(0,n.yg)("center",null,(0,n.yg)("img",{width:800,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/Node_red_pic/3Filter_data.gif"})),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Below is the code to filter the data")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-javascript"},'var Temperature_Indoor = Number(msg.payload["OBJECT_LIST(76)"][1]["PRESENT_VALUE(85)"]); \nvar Temperature_Waterm = Number(msg.payload["OBJECT_LIST(76)"][2]["PRESENT_VALUE(85)"]); \nvar Temperature_Outdoor = Number(msg.payload["OBJECT_LIST(76)"][3]["PRESENT_VALUE(85)"]); \nvar msg0 = { payload: Temperature_Indoor };\nvar msg1 = { payload: Temperature_Waterm };\nvar msg2 = { payload: Temperature_Outdoor };\nreturn [msg0, msg1, msg2];\n')),(0,n.yg)("h3",{id:"step-4loop-reading"},"Step 4:Loop reading"),(0,n.yg)("p",null,"We need to continuously obtain data from BACnet devices, which requires the use of the ",(0,n.yg)("inlineCode",{parentName:"p"},'"loop"')," node. As shown in the figure, we introduce the ",(0,n.yg)("inlineCode",{parentName:"p"},'"loop"')," node to join the loop based on the third step. The ",(0,n.yg)("inlineCode",{parentName:"p"},'"loop"')," node has three loop modes. We Using the ",(0,n.yg)("inlineCode",{parentName:"p"},'"condition"')," mode, ",(0,n.yg)("inlineCode",{parentName:"p"},'"1 == 1"')," is entered in the loop condition to achieve an infinite loop. At the same time, a ",(0,n.yg)("inlineCode",{parentName:"p"},'"delay"')," node is added to introduce a 2s delay in the loop, so that the data can be read every 2s."),(0,n.yg)("center",null,(0,n.yg)("img",{width:800,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/Node_red_pic/4Loop_reading.gif"})),(0,n.yg)("h3",{id:"step-5data-display"},"Step 5:Data Display"),(0,n.yg)("p",null,"Through the above 4 steps, we can continuously obtain data from BACnet devices. In order to make data changes more intuitive, we can introduce UI functions and draw a UI interactive interface to display data changes. This can use ",(0,n.yg)("strong",{parentName:"p"},'"node-red-dashboard"')," Node implementation. In this example, ",(0,n.yg)("inlineCode",{parentName:"p"},'"chart"')," and ",(0,n.yg)("inlineCode",{parentName:"p"},'"gauge"')," are used to draw three sets of line charts and dashboards. The output of the step 4 is used as the input of ",(0,n.yg)("inlineCode",{parentName:"p"},'"chart"')," and ",(0,n.yg)("inlineCode",{parentName:"p"},'"gauge"')," to achieve real-time visual monitoring of BACnet data."),(0,n.yg)("center",null,(0,n.yg)("img",{width:800,src:"https://files.seeedstudio.com/wiki/reComputer-R1000/Node_red_pic/5show.gif"})),(0,n.yg)("p",null,"This section mainly introduces how to use the ",(0,n.yg)("strong",{parentName:"p"},'"node-bacnet-contrib-extended"')," and ",(0,n.yg)("strong",{parentName:"p"},'"node-red-dashboard"')," nodes to achieve visual reading of BACnet device data. More instructions for the use of the ",(0,n.yg)("strong",{parentName:"p"},'"node-bacnet-contrib-extended"')," node You can refer to ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/edge_box_rpi_200_node_red_bacnet_tcp/"},"this tutorial"),"."),(0,n.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,n.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,n.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,n.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}u.isMDXComponent=!0}}]);