"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[46862],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>y});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),g=d(n),c=r,y=g["".concat(s,".").concat(c)]||g[c]||u[c]||o;return n?a.createElement(y,l(l({ref:t},p),{},{components:n})):a.createElement(y,l({ref:t},p))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[g]="string"==typeof e?e:r,l[1]=i;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},85969:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=n(58168),r=(n(96540),n(15680));const o={description:"Deploy InfluxDB on an Edgebox RPi 200 for efficient time-series data collection and analysis in IoT applications. This guide covers installation, configuration, and usage to leverage the power of InfluxDB on your Raspberry Pi-powered edge controller. Achieve real-time insights and robust monitoring capabilities directly at the edge of your network.",title:"Edge Box RPi 200 with Node Red and InfluxDB",keywords:["Edge Controller","Edge-Box","Node-Red","InfluxDB"],image:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/EdgeBox-RPi-200-font.jpg",slug:"/edge_box_rpi_200_node_red_influxdb",last_update:{date:"06/13/2024",author:"Kasun Thushara"}},l=void 0,i={unversionedId:"Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_influxdb",id:"Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_influxdb",title:"Edge Box RPi 200 with Node Red and InfluxDB",description:"Deploy InfluxDB on an Edgebox RPi 200 for efficient time-series data collection and analysis in IoT applications. This guide covers installation, configuration, and usage to leverage the power of InfluxDB on your Raspberry Pi-powered edge controller. Achieve real-time insights and robust monitoring capabilities directly at the edge of your network.",source:"@site/docs/Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_influxdb.md",sourceDirName:"Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red",slug:"/edge_box_rpi_200_node_red_influxdb",permalink:"/edge_box_rpi_200_node_red_influxdb",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_influxdb.md",tags:[],version:"current",lastUpdatedBy:"Kasun Thushara",lastUpdatedAt:1718236800,formattedLastUpdatedAt:"Jun 13, 2024",frontMatter:{description:"Deploy InfluxDB on an Edgebox RPi 200 for efficient time-series data collection and analysis in IoT applications. This guide covers installation, configuration, and usage to leverage the power of InfluxDB on your Raspberry Pi-powered edge controller. Achieve real-time insights and robust monitoring capabilities directly at the edge of your network.",title:"Edge Box RPi 200 with Node Red and InfluxDB",keywords:["Edge Controller","Edge-Box","Node-Red","InfluxDB"],image:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/EdgeBox-RPi-200-font.jpg",slug:"/edge_box_rpi_200_node_red_influxdb",last_update:{date:"06/13/2024",author:"Kasun Thushara"}},sidebar:"ProductSidebar",previous:{title:"Edge Box RPi 200 with Node Red and BACnet TCP",permalink:"/edge_box_rpi_200_node_red_bacnet_tcp"},next:{title:"Edge Box RPi 200 with Grafana",permalink:"/edgebox_rpi_200_grafana"}},s={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:3},{value:"Software Preparation",id:"software-preparation",level:3},{value:"Installing InfluxDB on Edgebox RPi 200",id:"installing-influxdb-on-edgebox-rpi-200",level:2},{value:"Start InfluxDB Server",id:"start-influxdb-server",level:2},{value:"Testing InfluxDB",id:"testing-influxdb",level:2},{value:"Adding Authentication to InfluxDB",id:"adding-authentication-to-influxdb",level:2},{value:"Sending Data to InfluxDB via Node-RED",id:"sending-data-to-influxdb-via-node-red",level:2},{value:"Function Node",id:"function-node",level:3},{value:"InfluxDB Out Node",id:"influxdb-out-node",level:3},{value:"Test the Flow",id:"test-the-flow",level:3},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],p={toc:d},g="wrapper";function u(e){let{components:t,...n}=e;return(0,r.yg)(g,(0,a.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"introduction"},"Introduction"),(0,r.yg)("p",null,"Deploying ",(0,r.yg)("a",{parentName:"p",href:"https://www.influxdata.com/"},"InfluxDB")," on an Edgebox RPi 200, a Raspberry Pi-powered edge controller, enables robust time-series data collection and analysis at the edge of your network. This setup is ideal for IoT applications, providing real-time insights and monitoring capabilities. By leveraging the lightweight yet powerful InfluxDB database, you can efficiently manage and analyze sensor data directly on the Edgebox. The following guide outlines the steps to install, configure, and use InfluxDB on your Edgebox RPi 200, ensuring a seamless integration into your data infrastructure."),(0,r.yg)("h3",{id:"hardware-preparation"},"Hardware Preparation"),(0,r.yg)("div",{class:"table-center"},(0,r.yg)("table",{class:"table-nobg"},(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("th",{class:"table-trnobg"},"Edge Box RPi 200")),(0,r.yg)("tr",{class:"table-trnobg"}),(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("td",{class:"table-trnobg"},(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://media-cdn.seeedstudio.com/media/catalog/product/cache/bb49d3ec4ee05b6f018e93f896b8a25d/1/-/1-102991599_edgebox-rpi-200-first.jpg",style:{width:300,height:"auto"}})))),(0,r.yg)("tr",{class:"table-trnobg"}),(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("td",{class:"table-trnobg"},(0,r.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/EdgeBox-RPi-200-CM4104016-p-5486.html"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,r.yg)("h3",{id:"software-preparation"},"Software Preparation"),(0,r.yg)("p",null,"Edge Box comes to your hand pre-installed with Raspberry Pi OS. If you are booting this device for the first time, please read our ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Edge_Box_introduction/"},"Getting Started Wiki"),". We have prepared a ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Edge-Box-Getting-Started-with-Node-Red/"},"Getting Started Guide on Node-RED"),". It is recommended that you review this guide before proceeding to the wiki. In this tutorial, we are going to connect the Host PC running the YABE room temperature simulator with Node-RED running on Edge Box."),(0,r.yg)("h2",{id:"installing-influxdb-on-edgebox-rpi-200"},"Installing InfluxDB on Edgebox RPi 200"),(0,r.yg)("p",null,"This guide covers the steps to install and set up InfluxDB on an Edgebox RPi 200 edge controller."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Update the System"),(0,r.yg)("p",null,"First, ensure your system is up-to-date by running the following command: SSH to EdgeBox and"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo apt update\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Add the InfluxDB Repository"),(0,r.yg)("p",null,"Add the InfluxDB GPG key and repository to your system."),(0,r.yg)("p",null,"Add the GPG key:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"curl https://repos.influxdata.com/influxdata-archive.key | gpg --dearmor | sudo tee /usr/share/keyrings/influxdb-archive-keyring.gpg >/dev/null\n")),(0,r.yg)("p",null,"Add the repository to the sources list:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},'echo "deb [signed-by=/usr/share/keyrings/influxdb-archive-keyring.gpg] https://repos.influxdata.com/debian stable main" | sudo tee /etc/apt/sources.list.d/influxdb.list\n')),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),": Update Package List"),(0,r.yg)("p",null,"Update the package list to include the InfluxDB repository:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo apt update\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),": Install InfluxDB"),(0,r.yg)("p",null,"Install InfluxDB version 1"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo apt install influxdb\n")),(0,r.yg)("h2",{id:"start-influxdb-server"},"Start InfluxDB Server"),(0,r.yg)("p",null,"Enable and start the InfluxDB service:"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),". Unmask the service:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl unmask influxdb\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),". Enable the service:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl enable influxdb\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),". Start the service:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl start influxdb\n")),(0,r.yg)("h2",{id:"testing-influxdb"},"Testing InfluxDB"),(0,r.yg)("p",null,"Access the InfluxDB CLI tool to perform basic database operations."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),". Open terminal :"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"influx\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),". Create a database:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"CREATE DATABASE data\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),". Use the database:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"USE data\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),". Insert a sample data point:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"INSERT room,temperature=30.1 humidity=80.2\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 5"),". Query the inserted data:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"SELECT * FROM room\n")),(0,r.yg)("h2",{id:"adding-authentication-to-influxdb"},"Adding Authentication to InfluxDB"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),". Open terminal:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"influx\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),". Create an admin user with all privileges (replace ",(0,r.yg)("inlineCode",{parentName:"p"},"<password>")," with your secure password):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"CREATE USER admin WITH PASSWORD '<password>' WITH ALL PRIVILEGES\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),". Exit the InfluxDB CLI:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"exit\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),". Edit the InfluxDB configuration to enable authentication:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo nano /etc/influxdb/influxdb.conf\n")),(0,r.yg)("p",null,"Under the ",(0,r.yg)("inlineCode",{parentName:"p"},"[HTTP]")," section, add or modify the following lines:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'    auth-enabled = true\n    pprof-enabled = true\n    pprof-auth-enabled = true\n    ping-auth-enabled = true\n    enabled=true\n    bind-address=":8086"\n')),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 5"),". Restart the InfluxDB service to apply the changes:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl restart influxdb\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 6"),". Connect to InfluxDB with the admin user:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"influx -username admin -password <password>\n")),(0,r.yg)("p",null,"Make sure to replace ",(0,r.yg)("inlineCode",{parentName:"p"},"<password>")," with the password you set for the admin user."),(0,r.yg)("h2",{id:"sending-data-to-influxdb-via-node-red"},"Sending Data to InfluxDB via Node-RED"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),". Open your Node-RED in your browser (typically ",(0,r.yg)("inlineCode",{parentName:"p"},"http://<your-edgebox-ip>:1880"),")."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),". Install the ",(0,r.yg)("inlineCode",{parentName:"p"},"node-red-contrib-influxdb")," using the Node-RED manage palette."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),". Drag and drop an ",(0,r.yg)("inlineCode",{parentName:"p"},"inject")," node, a ",(0,r.yg)("inlineCode",{parentName:"p"},"function")," node, and an ",(0,r.yg)("inlineCode",{parentName:"p"},"influxdb out")," node onto the flow canvas, and connect them as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"[Inject Node] -> [Function Node] -> [InfluxDB Out Node]\n")),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/ifdb-flow.PNG"})),(0,r.yg)("h3",{id:"function-node"},"Function Node"),(0,r.yg)("p",null,"This node formats the data to be sent to InfluxDB."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),". Double-click the ",(0,r.yg)("inlineCode",{parentName:"p"},"function")," node."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),". Enter a name (e.g., ",(0,r.yg)("inlineCode",{parentName:"p"},"Format Data for InfluxDB"),")."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),". Enter the following code in the function editor:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"msg.payload = [\n    {\n        temperature: 30.1,\n        humidity: 80.2\n    }\n];\nreturn msg;\n")),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/js-influxdb.PNG"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),'. Click "Done".'),(0,r.yg)("h3",{id:"influxdb-out-node"},"InfluxDB Out Node"),(0,r.yg)("p",null,"This node sends the formatted data to InfluxDB."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1"),". Double-click the ",(0,r.yg)("inlineCode",{parentName:"p"},"influxdb out")," node."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2"),". Enter the following details:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Name"),": labdata"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database"),": data (previously created)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Measurement"),": lab")),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/influxin.PNG"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3"),". Click the pencil icon to add a new InfluxDB server configuration."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4"),". Enter the following details:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Name"),": InfluxDB"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Version"),": 1.8-flux"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"URL"),": ",(0,r.yg)("inlineCode",{parentName:"li"},"http://localhost:8086")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Username"),": admin"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Password"),": ",(0,r.yg)("inlineCode",{parentName:"li"},"<password>")," (the password you created)")),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/server-ifdb.PNG"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 5"),'. Click "Add" and then "Done".'),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 6"),'. Click "Deploy" to save and deploy your flow.'),(0,r.yg)("h3",{id:"test-the-flow"},"Test the Flow"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Click the button on the ",(0,r.yg)("inlineCode",{parentName:"li"},"inject")," node to trigger the flow manually."),(0,r.yg)("li",{parentName:"ol"},"Check your InfluxDB database to see if the data has been successfully written by running the following commands on terminal:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"influx -username admin -password <password>\nUSE data\nSELECT * FROM lab\n")),(0,r.yg)("p",null,"Make sure to replace ",(0,r.yg)("inlineCode",{parentName:"p"},"<password>")," with the password you set for the admin user."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/result-lab.PNG"})),(0,r.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,r.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,r.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,r.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}u.isMDXComponent=!0}}]);