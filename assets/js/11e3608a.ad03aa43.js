"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[31514],{15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>m});var r=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},g=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,g=l(e,["components","mdxType","originalType","parentName"]),u=p(a),d=n,m=u["".concat(s,".").concat(d)]||u[d]||c[d]||i;return a?r.createElement(m,o(o({ref:t},g),{},{components:a})):r.createElement(m,o({ref:t},g))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:n,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8556:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var r=a(9668),n=(a(96540),a(15680));const i={description:"This tutorial will show you how to compile, configure and burn balenaOS for R1000.",title:"Build balenaOS for reComputer R1000",keywords:["Edge","reComputer R1000","balena"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/build_balenaOS_for_reComputer_r1000",last_update:{date:"08/19/2024",author:"ShuishengPeng"}},o=void 0,l={unversionedId:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/balenaOS/recomputer_r1000_build_seeed_balena_image",id:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/balenaOS/recomputer_r1000_build_seeed_balena_image",title:"Build balenaOS for reComputer R1000",description:"This tutorial will show you how to compile, configure and burn balenaOS for R1000.",source:"@site/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/balenaOS/recomputer_r1000_build_seeed_balena_image.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/balenaOS",slug:"/build_balenaOS_for_reComputer_r1000",permalink:"/build_balenaOS_for_reComputer_r1000",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reComputer_R1000/Applications/balenaOS/recomputer_r1000_build_seeed_balena_image.md",tags:[],version:"current",lastUpdatedBy:"ShuishengPeng",lastUpdatedAt:1724025600,formattedLastUpdatedAt:"Aug 19, 2024",frontMatter:{description:"This tutorial will show you how to compile, configure and burn balenaOS for R1000.",title:"Build balenaOS for reComputer R1000",keywords:["Edge","reComputer R1000","balena"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/build_balenaOS_for_reComputer_r1000",last_update:{date:"08/19/2024",author:"ShuishengPeng"}},sidebar:"ProductSidebar",previous:{title:"reComputer R1000 with balena",permalink:"/reComputer_r1000_balena"},next:{title:"reComputer R1000 with Home Assistant",permalink:"/recomputer_r1000_home_automation"}},s={},p=[{value:"What is balena?",id:"what-is-balena",level:2},{value:"Getting Start",id:"getting-start",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:3},{value:"Software",id:"software",level:3},{value:"Hardware Configuration",id:"hardware-configuration",level:3},{value:"Compile R1000-balenaOS",id:"compile-r1000-balenaos",level:3},{value:"Configure R1000-balenaOS",id:"configure-r1000-balenaos",level:3},{value:"Steps for Flashing balena OS",id:"steps-for-flashing-balena-os",level:3},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],g={toc:p},u="wrapper";function c(e){let{components:t,...a}=e;return(0,n.yg)(u,(0,r.A)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h2",{id:"what-is-balena"},"What is balena?"),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://www.balena.io/"},"balena")," is an Internet of Things (IoT) platform designed to help developers build, deploy, and manage IoT  applications across a fleet of devices. It supports a wide range of device architectures and includes features for containerized application deployment, making it possible to easily update your IoT software and HostOS, fix bugs and introduce new features on your IoT applications. balena provides a unified way to push code updates, manage device configurations and ensure devices run reliably and securely in the field, regardless of their location or network conditions."),(0,n.yg)("p",null,"This tutorial will show you how to compile, configure and burn balenaOS for R1000."),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/balena/balena.png",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("h2",{id:"getting-start"},"Getting Start"),(0,n.yg)("p",null,"Before you start this project, you may need to prepare your hardware and software in advance as described here."),(0,n.yg)("h3",{id:"hardware-preparation"},"Hardware Preparation"),(0,n.yg)("div",{class:"table-center"},(0,n.yg)("table",{class:"table-nobg"},(0,n.yg)("tr",{class:"table-trnobg"},(0,n.yg)("th",{class:"table-trnobg"},"reComputer R1000")),(0,n.yg)("tr",{class:"table-trnobg"}),(0,n.yg)("tr",{class:"table-trnobg"},(0,n.yg)("td",{class:"table-trnobg"},(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/01.png",style:{width:300,height:"auto"}})))),(0,n.yg)("tr",{class:"table-trnobg"}),(0,n.yg)("tr",{class:"table-trnobg"},(0,n.yg)("td",{class:"table-trnobg"},(0,n.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,n.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/reComputer-R1025-10-p-5895.html"},(0,n.yg)("strong",null,(0,n.yg)("span",null,(0,n.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,n.yg)("h3",{id:"software"},"Software"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://docs.yoctoproject.org/4.0.20/brief-yoctoprojectqs/index.html"},"yocto")," environment"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://www.docker.com/"},"docker")," environment"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://etcher.balena.io/"},"balenaEtcher")," to flash the CM4 memory.")),(0,n.yg)("h3",{id:"hardware-configuration"},"Hardware Configuration"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 1"),": You need to set the switch on the side of the R1000 to boot mode, then power on the device"),(0,n.yg)("div",{class:"table-center"},(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"Switch Position"),(0,n.yg)("th",{parentName:"tr",align:null},"Mode"),(0,n.yg)("th",{parentName:"tr",align:null},"Description"),(0,n.yg)("th",{parentName:"tr",align:null},"nRPI-BOOT"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/fig141.png",alt:"image",width:"80"})),(0,n.yg)("td",{parentName:"tr",align:null},"Normal mode"),(0,n.yg)("td",{parentName:"tr",align:null},"Boot from eMMC"),(0,n.yg)("td",{parentName:"tr",align:null},"Low")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/recomputer_r_images/fig14.png",alt:"image",width:"80"})),(0,n.yg)("td",{parentName:"tr",align:null},"Flash mode"),(0,n.yg)("td",{parentName:"tr",align:null},"Boot from USB"),(0,n.yg)("td",{parentName:"tr",align:null},"High"))))),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 2"),": Please use a USB Type-c cable to connect reComputer R1000 to your computer."),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/type-cport.png",alt:"pir",width:"250",height:"auto"})),(0,n.yg)("h3",{id:"compile-r1000-balenaos"},"Compile R1000-balenaOS"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 1"),": Download the following libraries and ensure that the current environment supports compiling the yocto project"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"}," sudo apt install gawk wget git diffstat unzip texinfo gcc build-essential chrpath socat cpio python3 python3-pip python3-pexpect xz-utils debianutils iputils-ping python3-git python3-jinja2 python3-subunit zstd liblz4-tool file locales libacl1 jq nodejs npm\n sudo locale-gen en_US.UTF-8\n")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 2"),": Enter the following instructions to download and configure ",(0,n.yg)("inlineCode",{parentName:"p"},"balena-seeed-cm4"),", and finally compile the yocto project."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"  git clone https://github.com/Seeed-Studio/balena-seeed-cm4.git\n  cd balena-seeed-cm4\n  git submodule update --init --recursive\n  ./balena-yocto-scripts/build/barys --dry-run\n  source layers/poky/oe-init-build-env\n  MACHINE=seeed-recomputer-r100x bitbake balena-image\n")),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/0_build_balenaOS.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("h3",{id:"configure-r1000-balenaos"},"Configure R1000-balenaOS"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 1"),": Enter the directory where the compiled image is located, then enter the command line interface, enter ",(0,n.yg)("inlineCode",{parentName:"p"},"balena login"),", and log in to ",(0,n.yg)("inlineCode",{parentName:"p"},"balena Cloud"),"."),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/1_login_balena.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 2"),": Create a new ",(0,n.yg)("inlineCode",{parentName:"p"},"Fleet"),", select the type as ",(0,n.yg)("inlineCode",{parentName:"p"},"Raspberry Pi 4 (using 64bit os)")),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/2.1new_fleet.png",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 3"),": Enter the following command to preload the image"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"  balena preload ./balena-image-seeed-recomputer-r100x.balenaos-img --fleet [fleet name]\n")),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/2_preload_image.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 4"),": Register the new device with Fleet and generate a device ID"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"balena device register [fleet name]\n")),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/3_regester_dev.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 5"),": Generate configuration file."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"balena config generate --device [uuid] --version 3.0.15+atsss --dev -o config.json\n")),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/4_generate_config.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 6"),": Load the configuration file."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"balena os configure balena-image-seeed-recomputer-r100x.balenaos-img --config config.json  --device [uuid] --version 3.0.15+atsss --dev\n")),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/5_config_image.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 7"),": Copy the final image file,this image can be burned into reComputer R1000"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"cp balena-image-seeed-recomputer-r100x.balenaos-img recomputer_balenaos-dev.img\n")),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/6_rename.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("h3",{id:"steps-for-flashing-balena-os"},"Steps for Flashing balena OS"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 1"),": Open the ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/raspberrypi/usbboot/raw/master/win32/rpiboot_setup.exe"},(0,n.yg)("strong",{parentName:"a"},"rpiboot"))," software, and then the system will show the new disk"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 2"),": Open the flash tool ",(0,n.yg)("a",{parentName:"p",href:"https://etcher.balena.io/"},"balenaEtcher"),", select the balena image file, then select the target disk, and finally click Burn."),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/burn_image.gif",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Step 3"),": After the burning is completed, restart the R1000. After a while, you will see the new device successfully online on the balena Cloud."),(0,n.yg)("div",{align:"center"},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/reComputer-R1000/balena/7_online.png",alt:"pir",width:"700",height:"auto"})),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"To use the rs485 function, you need to open the power pin of the 485 transceiver. This can be achieved through the following three lines of commands. We recommend that you write these three lines of commands into the startup script:"),(0,n.yg)("pre",{parentName:"admonition"},(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"  echo 500 > /sys/class/gpio/export\n  echo out > /sys/class/gpio/gpio500/direction\n  echo 1 > /sys/class/gpio/gpio500/value\n"))),(0,n.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,n.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,n.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,n.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}c.isMDXComponent=!0}}]);