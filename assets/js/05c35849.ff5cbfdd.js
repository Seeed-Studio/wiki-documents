"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[81262],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>u});var i=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),d=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},h="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),h=d(n),m=a,u=h["".concat(s,".").concat(m)]||h[m]||g[m]||l;return n?i.createElement(u,r(r({ref:t},p),{},{components:n})):i.createElement(u,r({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[h]="string"==typeof e?e:a,r[1]=o;for(var d=2;d<l;d++)r[d]=n[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},67579:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>g,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var i=n(58168),a=(n(96540),n(15680));const l={description:"Wifi Shield V2.0",title:"Wifi Shield V2.0",keywords:["Arduino shield"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Wifi_Shield_V2.0",last_update:{date:"2/16/2023",author:"jianjing Huang"}},r=void 0,o={unversionedId:"Top_Brand/Arduino/shield/Wifi_Shield_V2.0",id:"Top_Brand/Arduino/shield/Wifi_Shield_V2.0",title:"Wifi Shield V2.0",description:"Wifi Shield V2.0",source:"@site/docs/Top_Brand/Arduino/shield/Wifi_Shield_V2.0.md",sourceDirName:"Top_Brand/Arduino/shield",slug:"/Wifi_Shield_V2.0",permalink:"/Wifi_Shield_V2.0",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Top_Brand/Arduino/shield/Wifi_Shield_V2.0.md",tags:[],version:"current",lastUpdatedBy:"jianjing Huang",lastUpdatedAt:1676505600,formattedLastUpdatedAt:"Feb 16, 2023",frontMatter:{description:"Wifi Shield V2.0",title:"Wifi Shield V2.0",keywords:["Arduino shield"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Wifi_Shield_V2.0",last_update:{date:"2/16/2023",author:"jianjing Huang"}},sidebar:"ProductSidebar",previous:{title:"Wifi Shield (Fi250) V1.1",permalink:"/Wifi_Shield_Fi250_V1.1"},next:{title:"Shield Bot V1.1",permalink:"/Shield_Bot_V1.1"}},s={},d=[{value:"Version Tracker",id:"version-tracker",level:2},{value:"Specifications",id:"specifications",level:2},{value:"Hardware Overview",id:"hardware-overview",level:2},{value:"Pins Used / Shield Compatibility",id:"pins-used--shield-compatibility",level:3},{value:"RN171 WiFi Module",id:"rn171-wifi-module",level:3},{value:"LED Status Indicators",id:"led-status-indicators",level:3},{value:"WiFi Library",id:"wifi-library",level:2},{value:"Setup",id:"setup",level:3},{value:"Functions",id:"functions",level:3},{value:"join()",id:"join",level:4},{value:"receive()",id:"receive",level:4},{value:"sendCommand()",id:"sendcommand",level:4},{value:"WiFi Shield Examples/Applications",id:"wifi-shield-examplesapplications",level:2},{value:"Example 1: Send Commands to WiFi Shield and Receive Response Via The Arduino Serial Monitor Window",id:"example-1-send-commands-to-wifi-shield-and-receive-response-via-the-arduino-serial-monitor-window",level:3},{value:"Example 2: Connect to An Access Point / Internet Router",id:"example-2-connect-to-an-access-point--internet-router",level:3},{value:"Connecting By Typing Commands",id:"connecting-by-typing-commands",level:4},{value:"Connecting Using Our WiFi Libraries",id:"connecting-using-our-wifi-libraries",level:4},{value:"Configuring The Shield to Connect On Power-Up",id:"configuring-the-shield-to-connect-on-power-up",level:4},{value:"Setting a Static IP Address",id:"setting-a-static-ip-address",level:4},{value:"Example 3: Communicating With the Network ()",id:"example-3-communicating-with-the-network-",level:3},{value:"Example 4: Using the WiFi Shield as Webserver (Serving Webpages From the Shield)",id:"example-4-using-the-wifi-shield-as-webserver-serving-webpages-from-the-shield",level:3},{value:"Example 5: Controlling The Arduino Digital Pins From a Webpage (Toggling LEDs From an Webpage)",id:"example-5-controlling-the-arduino-digital-pins-from-a-webpage-toggling-leds-from-an-webpage",level:3},{value:"Example 6: WiFi Shield and Android App",id:"example-6-wifi-shield-and-android-app",level:3},{value:"Example 7: Sending Data To and Retrieving Data From an External Server",id:"example-7-sending-data-to-and-retrieving-data-from-an-external-server",level:3},{value:"Example 8: TCP Communication With Terminal",id:"example-8-tcp-communication-with-terminal",level:3},{value:"Example 9: WiFi Shield and Relay Shield",id:"example-9-wifi-shield-and-relay-shield",level:3},{value:"Example 10: Adhoc Mode",id:"example-10-adhoc-mode",level:3},{value:"FAQs",id:"faqs",level:2},{value:"Schematic Online Viewer",id:"schematic-online-viewer",level:2},{value:"Resources",id:"resources",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],p={toc:d},h="wrapper";function g(e){let{components:t,...n}=e;return(0,a.yg)(h,(0,i.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi_Shield_v2.jpg",alt:null})),(0,a.yg)("p",null,"This WiFi shield features the RN171 TCP/IP module to allow your Arduino/Seeeduino to connect with up to 802.11b/g wireless networks."),(0,a.yg)("p",null,"The shield's default communication protocol with the Arduino is UART/Serial, and you may select which digital pins (D0 to D7) to use for RX and TX with two jumper rows we've incorporated. The shield also has two on-board Grove connectors for I2C and Serial to allow the shield to be used with any of our Grove devices."),(0,a.yg)("p",null,"An on-board antenna allows the shield to cover a wider range and transmit stronger signals. The RN171 module supports TCP, UDP, FTP, and HTTP communication protocols to meet the needs of most wireless and Internet of Things (IoT) network projects e.g. smart home networks, robots control, personal weather stations."),(0,a.yg)("p",null,"The shield is very well documented with our examples below and its ",(0,a.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFly-RN-UM.pdf"},"user manual"),"."),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/depot/Wifi-Shield-V20-p-2505.html"},(0,a.yg)("img",{parentName:"a",src:"https://files.seeedstudio.com/wiki/common/Get_One_Now_Banner.png",alt:null}))),(0,a.yg)("h2",{id:"version-tracker"},"Version Tracker"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,a.yg)("th",{parentName:"tr",align:null},"Wifi Shield V1.0"),(0,a.yg)("th",{parentName:"tr",align:null},"Wifi Shield V1.1(v1.2)"),(0,a.yg)("th",{parentName:"tr",align:null},"Wifi Shield V2.0"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Voltage"),(0,a.yg)("td",{parentName:"tr",align:null},"+3.5V~+5V"),(0,a.yg)("td",{parentName:"tr",align:null},"+3.5V~+5V"),(0,a.yg)("td",{parentName:"tr",align:null},"+3.5V~+5V")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Standard Shield"),(0,a.yg)("td",{parentName:"tr",align:null},"Yes"),(0,a.yg)("td",{parentName:"tr",align:null},"Yes"),(0,a.yg)("td",{parentName:"tr",align:null},"Yes")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Communication Mode"),(0,a.yg)("td",{parentName:"tr",align:null},"Serial port"),(0,a.yg)("td",{parentName:"tr",align:null},"Serial port"),(0,a.yg)("td",{parentName:"tr",align:null},"Serial port")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Standard Shield"),(0,a.yg)("td",{parentName:"tr",align:null},"No"),(0,a.yg)("td",{parentName:"tr",align:null},"Yes"),(0,a.yg)("td",{parentName:"tr",align:null},"Yes")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Antenna Type"),(0,a.yg)("td",{parentName:"tr",align:null},"mast antenna"),(0,a.yg)("td",{parentName:"tr",align:null},"PCB antenna"),(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("font",{color:"Red"},"onboard antenna"))),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Library File"),(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WifiShield.zip"},"Wifi Shield Library V1.0")),(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://github.com/Seeed-Studio/WiFi_Shield"},"New Wifi Shield Library")),(0,a.yg)("td",{parentName:"tr",align:null},(0,a.yg)("a",{parentName:"td",href:"https://github.com/Seeed-Studio/WiFi_Shield"},"New Wifi Shield Library")," ",(0,a.yg)("em",{parentName:"td"},"the same as v1.2"))))),(0,a.yg)("h2",{id:"specifications"},"Specifications"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Parameter"),(0,a.yg)("th",{parentName:"tr",align:null},"Value"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Operating voltage"),(0,a.yg)("td",{parentName:"tr",align:null},"3.3~5.5 V")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Compatible board directly"),(0,a.yg)("td",{parentName:"tr",align:null},"Arduino Uno/Seeeduino")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Current"),(0,a.yg)("td",{parentName:"tr",align:null},"25~400mA")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Transmit power"),(0,a.yg)("td",{parentName:"tr",align:null},"0-10 dBm")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Frequency"),(0,a.yg)("td",{parentName:"tr",align:null},"2402~2480 MHz")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Channel"),(0,a.yg)("td",{parentName:"tr",align:null},"0~13")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Network rate"),(0,a.yg)("td",{parentName:"tr",align:null},"1-11 Mbps for 802.11b/6-54Mbps for 802.11g")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Dimension"),(0,a.yg)("td",{parentName:"tr",align:null},"60X56X19 mm")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Net Weight"),(0,a.yg)("td",{parentName:"tr",align:null},"24\xb11 g")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Secure WiFi authentication"),(0,a.yg)("td",{parentName:"tr",align:null},"WEP-128, WPA-PSK (TKIP), WPA2-PSK (AES)")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Built-in networking applications"),(0,a.yg)("td",{parentName:"tr",align:null},"DHCP client, DNS client, ARP, ICMP ping, FTP, TELNET, HTTP, UDP, TCP")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Certification"),(0,a.yg)("td",{parentName:"tr",align:null},"RN171: FCC, CE")))),(0,a.yg)("h2",{id:"hardware-overview"},"Hardware Overview"),(0,a.yg)("p",null,"The WiFi shield is compatible with any Arduino/Seeeduino development board as it only requires two digital pins of your choice between D0-D7 for UART/serial communication. To install, simply stack the shield on the Arduino/Seeeduino board."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi_shield_v2_breakout.png",alt:null})),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Serial Peripheral Interface (SPI) Connections (MOSI, SCK, MISO):")," These pins are not connected to any of the Arduino's pins, they are independent and the logic level output/input of them is 3.3V. They can be used to communicate with the Arduino via SPI but a 3.3V logic converter between these pins and the Arduino's will be needed. The data rate in SPI mode can reach up to 2Mbps."),(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"RES_Wifi:"),' The Wifi shield has an on-board "Rest Button" for the RN-171 module, you may also reset the RN-171 via software by sending the reset command. Additionally, if you would like to connect this pin to the Arduino\'s digital 6 pin, simply solder the pad labeled "P5" on the shield.')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"RN171:")," A super low power consumption wireless module with TCP/IP stack built in.")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Antenna:")," I.PEX connector.")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"RN171 breakout section:")," The RN171 module has its own analog input and GPIO pins, which the shield provides access to via this breakout section. The GPIO pins (IO3, IO7, IO8, and IO9) are 3.3V tolerant while the analog input pins (S_0 and S_1) can read 0-400mV (Do not exceed 1.2V). The RN171 can be configured to use these pins by software or they may connected to other pins to use other RN171 functions such as adhoc mode. The voltage of VCC is dependent on the supply power of the WiFi shield.")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"UART/Serial Select area:")," Two jumper rows to let you select which RX and TX pins you want to use to communicate with the Arduino.")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Grove connectors:")," Analog I2C Grove (if using Arduino UNO or Seeeduino) for pins A4&A5 and Digital Serial Grove for D8&D9. The voltage VCC is dependent on the power supply of the board."))),(0,a.yg)("h3",{id:"pins-used--shield-compatibility"},"Pins Used / Shield Compatibility"),(0,a.yg)("p",null,"The WiFi shield uses any two digital pins of your choice between D0 and D7 to communicate with the RN171 WiFi module, however keep in mind that D0 and D1 are used by the Arduino for programming and serial communication purposes and using them might interfere with these two functions."),(0,a.yg)("p",null,"In the example codes in this page we use D2 and D3 as RX and TX for the shield. In this case, the jumper hats should be connected as shown below:"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi_shield_v1.1_pinout.png",alt:null}),"\n",(0,a.yg)("em",{parentName:"p"},"D2 selected for WIFI_TX, D3 selected for WIFI_RX")),(0,a.yg)("h3",{id:"rn171-wifi-module"},"RN171 WiFi Module"),(0,a.yg)("p",null,"The RN-171 is a standalone complete TCP/IP wireless networking module. Due to its small form factor and extremely low power consumption, the RN-171 is perfect for mobile wireless applications. It incorporates a 2.4GHz radio, 32-bit SPARC processor, TCP/IP stack, real-time clock, crypto accelerator, power management, and analog sensor interfaces."),(0,a.yg)("p",null,"In the simplest configuration the hardware only requires four connections (PWR, TX, RX and GND) to create a wireless WiFi data connection. Additionally, the analog sensor inputs of the RN171 can be used as analog input pins, their rating is 0-400 mV (Do not exceed 1.2V DC)."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Power:")," The operating voltage of the RN-171 module is 3.3VDC typically, so a voltage regulator and logic level translator are designed on the WiFi shield. The LD1117 regulator on the shield converts to 3.3VDC, which supplies the RN171 module. However, due to the auto judgement schematic of power supply, the RN-171 can be powered via both 3V3 pin and 5V pin. But the supply power would be 5v if providing both 3.3v and 5v to the board. If using with an Arduino/Seeeduino board simply stack the WiFi shield on the board."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi_shield_v1.1_communicate.png",alt:null}),"\n",(0,a.yg)("em",{parentName:"p"},"Diagram of how the RN171 module is interfaced to the Arduino")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"GPIO_6\xa0:"),' The GPIO6 pin of the RN171 WiFi module is by default only connected to the LED labeled D5 on the WiFi shield. This LED is used to display the status of the Access Point (AP) connection. If however, you would like to connect GPIO6 to digital pin 5 of the Arduino, simply solder the pad labeled "P6" on the WiFi shield.'),(0,a.yg)("h3",{id:"led-status-indicators"},"LED Status Indicators"),(0,a.yg)("table",null,(0,a.yg)("colgroup",null,(0,a.yg)("col",{width:"25%"}),(0,a.yg)("col",{width:"25%"}),(0,a.yg)("col",{width:"25%"}),(0,a.yg)("col",{width:"25%"})),(0,a.yg)("thead",null,(0,a.yg)("tr",{class:"header"},(0,a.yg)("th",null,"Label"),(0,a.yg)("th",null,"Description"),(0,a.yg)("th",null,"Status"),(0,a.yg)("th",null,"Hardware Connection"))),(0,a.yg)("tbody",null,(0,a.yg)("tr",{class:"odd"},(0,a.yg)("td",null,"D5"),(0,a.yg)("td",null,"Green LED. Indicates the association status."),(0,a.yg)("td",null,(0,a.yg)("strong",null,"OFF:")," means the module is not associated with a network.",(0,a.yg)("br",null),(0,a.yg)("strong",null,"Solid ON:")," indicates that it is associated and Internet access is OK"),(0,a.yg)("td",null,"Connected to GPIO6 of the RN171 module")),(0,a.yg)("tr",{class:"even"},(0,a.yg)("td",null,"D1"),(0,a.yg)("td",null,"Red LED. Indicates the TCP/IP connection status."),(0,a.yg)("td",null,(0,a.yg)("strong",null,"Solid ON:")," connected over TCP.",(0,a.yg)("br",null),(0,a.yg)("p",null,(0,a.yg)("strong",null,"Fast Toggle (2 times/second):")," No IP address or module is in command mode.",(0,a.yg)("br",null)),(0,a.yg)("p",null,(0,a.yg)("strong",null,"Slow Toggle (once/second):")," IP address is OK.")),(0,a.yg)("td",null,"Connected to GPIO4 of the RN171 module")),(0,a.yg)("tr",{class:"odd"},(0,a.yg)("td",null,"RST"),(0,a.yg)("td",null,"Red LED. WiFi module reset status."),(0,a.yg)("td",null,(0,a.yg)("strong",null,"Solid ON:")," The reset button (WIFI_RST) is been pressed.",(0,a.yg)("br",null)),(0,a.yg)("td",null,"Connected to Reset of the RN171 module.")),(0,a.yg)("tr",{class:"even"},(0,a.yg)("td",null,"PWR"),(0,a.yg)("td",null,"Green LED. Indicates WiFi module's power up status."),(0,a.yg)("td",null,(0,a.yg)("strong",null,"Solid ON:"),"The module/shield is powered up."),(0,a.yg)("td",null,"Connected to the 3.3V output of the LD1117 voltage regulator.")))),(0,a.yg)("h2",{id:"wifi-library"},"WiFi Library"),(0,a.yg)("p",null,"We have created a library to help you interface with the shield, in this section we'll show you how to set up the library and introduce some of the functions."),(0,a.yg)("h3",{id:"setup"},"Setup"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("em",{parentName:"li"},"Download the ",(0,a.yg)("a",{parentName:"em",href:"https://github.com/Seeed-Studio/WiFi_Shield"},"library code as a zip file")," from the Wifi Shield github page.")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("em",{parentName:"li"},"Unzip the downloaded file into your \u2026/arduino/libraries/ folder .")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("em",{parentName:"li"},'Rename the unzipped folder "WifiShield"')),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("em",{parentName:"li"},"Start the Arduino IDE (or restart if it is open)."))),(0,a.yg)("h3",{id:"functions"},"Functions"),(0,a.yg)("p",null,"These are the most important/useful function in the library, we invite you to look at the .h files yourself to see all the functions available."),(0,a.yg)("h4",{id:"join"},"join()"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Description:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Used to join a WiFi access point"))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Syntax:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"join(const char ",(0,a.yg)("em",{parentName:"li"},"ssid, const char"),"phrase, int auth)"))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Parameters:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"ssid:")," The name of the access point you want the shield to connect to"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"phrase:")," The password/phrase of the access point you want the shield to connect to"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"auth:")," The authentication type of the access point you want the shield to connect to. Can be one of the following constants:",(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"WIFLY_AUTH_OPEN"),(0,a.yg)("li",{parentName:"ul"},"WIFLY_AUTH_WEP"),(0,a.yg)("li",{parentName:"ul"},"WIFLY_AUTH_WPA1"),(0,a.yg)("li",{parentName:"ul"},"WIFLY_AUTH_WPA1_2"),(0,a.yg)("li",{parentName:"ul"},"WIFLY_AUTH_WPA2_PSK"),(0,a.yg)("li",{parentName:"ul"},"WIFLY_AUTH_ADHOC"))))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Returns:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"boolean:")," true if the connection to the access point was successful, false otherwise."))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Example:"))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},'#include <SoftwareSerial.h>\n#include "WiFly.h"\n\nSoftwareSerial uart(2, 3); // create a serial connection to the WiFi shield TX and RX pins.\nWiFly wifly(&uart); // create a WiFly library object using the serial connection to the WiFi shield we created above.\n\nvoid setup()\n{\n    uart.begin(9600); // start the serial connection to the shield\n    Serial.begin(9600); // start the Arduino serial monitor window connection\n    wifly.reset(); // reset the shield\n    while(wifly.join("mySSID","mySSIDpassword",WIFLY_AUTH_WPA2_PSK) == false)\n    {\n        Serial.println("Failed to connect to accesspoint. Will try again.");\n    }\n    Serial.println("Connected to access point!");\n}\n\nvoid loop()\n{\n\n}\n')),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"The examples is based on Arduino UNO and we take D2/D3 as the SoftwareSerial pins. If you are using an Arduino Mega, D2 is not available anymore. More details please refer to ",(0,a.yg)("a",{parentName:"p",href:"https://www.arduino.cc/en/Tutorial/SoftwareSerialExample"},"Arduino Software Serial"),"\nHere's an example.")),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/connect_mega.jpg",alt:null})),(0,a.yg)("p",null,"As for the code, you need to do some change as well:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},"SoftwareSerial uart(10, 3); // create a serial connection to the WiFi shield TX and RX pins.\n")),(0,a.yg)("h4",{id:"receive"},"receive()"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Description:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Can be used to read data from the shield, an alternative for the Arduino's read() function."))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Syntax:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"receive(uint8_t *buf, int len, int timeout)"))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Parameters:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"buf:")," A buffer array where the bytes read from the shield is stored."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"len:")," The length/size of the buffer array"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"timeout:")," A timeout value to know when to stop trying to read."))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Returns:"),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"int:")," The number of bytes read from the shield."))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Example:"))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},"char c;\nwhile (wifly.receive((uint8_t *)&c, 1, 300) > 0) {\n    Serial.print((char)c);\n}\n")),(0,a.yg)("p",null,"See File->Examples->WiFi_Shield->wifly_test sketch for a complete example."),(0,a.yg)("h4",{id:"sendcommand"},"sendCommand()"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Description:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Some our functions (e.g. join(), reboot(), save()) act as wrappers for the text commands listed in the user manual of the RN171 module. The function sendCommand() allows you to come up with your own wrapper function if ours do not meet your needs."))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Syntax:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"sendCommand(const char ",(0,a.yg)("em",{parentName:"li"},"cmd, const char"),"ack, int timeout)"))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Parameters:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"cmd:")," Any command from the RN-171's user manual."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"ack:")," The expected return string from the command"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"timeout:")," The time allowed before considering the output a bad request/response"))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Returns:")),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"boolean:")," true if the WiFi shield responded with the ack string, false otherwise."))),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Example:")))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},'// our join() function is wrapper for the join command, as seen below.\n//The string "Associated" is what the user manual says the RN171 will return on success.\nif(sendCommand("join\\r", "Associated",DEFAULT_WAIT_RESPONSE_TIME*10))\n{\n    // joined\n}else{\n    // not able to join\n}\n')),(0,a.yg)("p",null,"See File->Examples->WiFi_Shield->wifly_test sketch for a complete example."),(0,a.yg)("h2",{id:"wifi-shield-examplesapplications"},"WiFi Shield Examples/Applications"),(0,a.yg)("h3",{id:"example-1-send-commands-to-wifi-shield-and-receive-response-via-the-arduino-serial-monitor-window"},"Example 1: Send Commands to WiFi Shield and Receive Response Via The Arduino Serial Monitor Window"),(0,a.yg)("p",null,"The WiFi shield's RN-171 module is configured by sending it the commands found in ",(0,a.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFly-RN-UM.pdf"},"its datasheet"),". You may write a sketch to send the commands automatically, but this is a great example that we recommend you go through because it will teach you exactly how the WiFi shield and RN-171 works."),(0,a.yg)("p",null,"To proceed follow the steps below, we have also created a video if you prefer to watch that"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=8dCrAaN16lE"},"Video - Getting Started With Seeeduino's WiFi Shield.")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 1: WiFi Shield Jumpers Configuration")),(0,a.yg)("p",null,"Position the jumpers in the WiFi shield such that digital pin 2 (D2) is selected for WIFI_TX, and digital pin 3 (D3) is selected for WIFI_RX as shown in the photo below. These are the pins we will use to send and receive information from the RN-171."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi_shield_v1.1_front.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Pins D2 for TX, and D3 for RX")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 2: Software/Code")),(0,a.yg)("p",null,"In the sketch below we have created a UART object to allow us to send and receive data from the RN-171/WiFi Shield. We then use this object in conjunction with the WiFly library to send data to the shield. The Arduino's Serial object is used to print the data we receive from the shield, and to receive the commands we want to send to the shield via the WiFly/UART object."),(0,a.yg)("p",null,"Upload the following code to your Arduino board:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},'#include <Arduino.h>\n#include <SoftwareSerial.h>\n#include "WiFly.h"\n\n// set up a new serial port.\nSoftwareSerial uart(2, 3); // create a serial connection to the WiFi shield TX and RX pins.\nWiFly wifly(&uart); // create a WiFly library object using the serial connection to the WiFi shield we created above.\n\nvoid setup()\n{\n    uart.begin(9600); // start the serial connection to the shield\n    Serial.begin(9600); // start the Arduino serial monitor window connection\n    delay(3000); // wait 3 second to allow the serial/uart object to start\n}\n\nvoid loop()\n{\n    while (wifly.available())  // if there is data available from the shield\n    {\n        Serial.write(wifly.read()); // display the data in the Serial monitor window.\n    }\n    while (Serial.available()) // if we typed a command\n    {\n        wifly.write(Serial.read()); // send the command to the WiFi shield.\n    }\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 3: Entering Command Mode")),(0,a.yg)("p",null,"The WiFly RN-171 module in the WiFi shield can operate in two modes: data, and command. When in data mode, the shield is able to receive and initiate connections. When in command mode, we are able to configure the module using the commands listed in its datasheet."),(0,a.yg)("p",null,"To enter command mode, follow these steps:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Open the Arduino Serial monitor."),(0,a.yg)("li",{parentName:"ol"},"Set the serial monitor to \u201cNo line ending\u201d, baud rate to 9600."),(0,a.yg)("li",{parentName:"ol"},'Type "$$$" into the Arduino Serial Monitor and press enter.'),(0,a.yg)("li",{parentName:"ol"},"The module will respond with the letters \u201cCMD\u201d, indicating that it has entered command mode.")),(0,a.yg)("p",null,"Let's go ahead and test some commands, do the following:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"In the Arduino Serial monitor window, select \u201cCarriage return\u201d and a baud rate of 9600."),(0,a.yg)("li",{parentName:"ol"},"Now type each of the commands in the table below into the Arduino Serial Monitor and press enter."),(0,a.yg)("li",{parentName:"ol"},"The module will output a response, as described in the table, for each command.")),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Commands"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"scan"),(0,a.yg)("td",{parentName:"tr",align:null},"This command performs an active probe scan of access points on all 13 channels. When you use this command, the module returns the MAC address, signal strength, SSID name, and security mode of the access points it finds.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"get ip"),(0,a.yg)("td",{parentName:"tr",align:null},"This command displays the IP address and port number settings")))),(0,a.yg)("p",null,"For a complete list of configuration commands, please see the RN-171 ",(0,a.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFly-RN-UM.pdf"},"Reference Guide")," starting on page 11."),(0,a.yg)("h3",{id:"example-2-connect-to-an-access-point--internet-router"},"Example 2: Connect to An Access Point / Internet Router"),(0,a.yg)("p",null,"In this example we will show you how to connect the WiFi shield to an access point (your internet router) with and without you typing the commands required:"),(0,a.yg)("h4",{id:"connecting-by-typing-commands"},"Connecting By Typing Commands"),(0,a.yg)("p",null,"This section will teach you how to connect the WiFi shield to an access point using commands from the RN-171 datasheet, by going through this section you will then know exactly what is happening in the background when you use our WiFi Arduino libraries."),(0,a.yg)("p",null,"Do the following:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Upload the code in Example One to your Arduino board")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Enter command mode:")),(0,a.yg)("ol",{parentName:"li"},(0,a.yg)("li",{parentName:"ol"},"Set the serial monitor to \u201cNo line ending\u201d, baud rate to 9600."),(0,a.yg)("li",{parentName:"ol"},"Type ",(0,a.yg)("em",{parentName:"li"},"$$$")," into the Arduino Serial Monitor and press enter."))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Set the serial monitor to \u201cCarriage return\u201d.")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Scan for available access points:")),(0,a.yg)("ol",{parentName:"li"},(0,a.yg)("li",{parentName:"ol"},"Type ",(0,a.yg)("em",{parentName:"li"},"scan")," and press enter. The Arduino serial monitor window will output a list of comma separated values for each access point the WiFi shield has found. From left to right the third value is the security mode, the last value is the SSID. This example shows a security mode of 4 with an SSID name MySSID: 01,01,-88,",(0,a.yg)("strong",{parentName:"li"},"04"),",1104,1c,00,45:56:78:be:93:1f,",(0,a.yg)("strong",{parentName:"li"},"MySSID")))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"From the list of access points found, find the one which corresponds to your internet router and note the security mode, and SSID as we will need these two values to connect to it.")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Set the security mode in the shield:")),(0,a.yg)("ol",{parentName:"li"},(0,a.yg)("li",{parentName:"ol"},"Type ",(0,a.yg)("em",{parentName:"li"},"set wlan auth m"),". Replace ",(0,a.yg)("em",{parentName:"li"},"m")," with the security mode number (in this example that would be 4) of the access point you wish to connect to."),(0,a.yg)("li",{parentName:"ol"},"The security modes supported by the WiFi shield are listed in Figure 1 below."))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Set the access point phrase")),(0,a.yg)("ol",{parentName:"li"},(0,a.yg)("li",{parentName:"ol"},"Type ",(0,a.yg)("em",{parentName:"li"},"set wlan phrase myPhrase"),". Replace ",(0,a.yg)("em",{parentName:"li"},"myPhrase")," with your access point's password/security key.")),(0,a.yg)("admonition",{parentName:"li",type:"note"},(0,a.yg)("p",{parentName:"admonition"},"If your access point's security type is WEP use ",(0,a.yg)("em",{parentName:"p"},"key")," instead of ",(0,a.yg)("em",{parentName:"p"},"phrase")," in the command above.")),(0,a.yg)("ol",{parentName:"li",start:2},(0,a.yg)("li",{parentName:"ol"},"The access point's (internet router) phrase is the password you use to connect to it from your PC. In Windows you can find it as shown in the animated image below:\n",(0,a.yg)("img",{parentName:"li",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/How_to_find_network_security_key_password.gif",alt:null}),"\nHow to find a networks' security key/password"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},(0,a.yg)("strong",{parentName:"p"},"Join the access point")),(0,a.yg)("ol",{parentName:"li"},(0,a.yg)("li",{parentName:"ol"},"Now that we have set the security type and phrase of the access point, we may connect to it."),(0,a.yg)("li",{parentName:"ol"},"Type ",(0,a.yg)("em",{parentName:"li"},"join MySSID"),". Replace MySSID with your access point's broadcast name."),(0,a.yg)("li",{parentName:"ol"},'The word "Associated!" will be displayed in the Arduino serial monitor window if successful.')))),(0,a.yg)("p",null,"A description of the commands you entered in the steps above is available in the table below. A more detailed description of each command can be found in the RN171's user manual."),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Number"),(0,a.yg)("th",{parentName:"tr",align:null},"Commands"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"1"),(0,a.yg)("td",{parentName:"tr",align:null},"scan"),(0,a.yg)("td",{parentName:"tr",align:null},"This command performs an active probe scan of access points on all 13 channels. When you use this command, the module returns the MAC address, signal strength, SSID name, and security mode of the access points it finds.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"2"),(0,a.yg)("td",{parentName:"tr",align:null},"set wlan auth 4"),(0,a.yg)("td",{parentName:"tr",align:null},"Find the value that corresponds to the security protocol on your access point. Then, tell the WiFly what security protocol to use, it is the number shown in ",(0,a.yg)("strong",{parentName:"td"},"Figure 1")," that corresponds to the access point's security protocol. Here we choose \u201c4\u201d.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"3"),(0,a.yg)("td",{parentName:"tr",align:null},"set wlan phrase seeed-mkt"),(0,a.yg)("td",{parentName:"tr",align:null},"Tell the WiFi shield your passphrase.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"4"),(0,a.yg)("td",{parentName:"tr",align:null},"join SEEED-MKT"),(0,a.yg)("td",{parentName:"tr",align:null},"Tell the WiFi shield to join, \u201cSEEED-MKT\u201c is the name of the access point we choose to connect. After sending the command the module should now connect and print out information about the connection. (If the connection is failed, try to send the command again until it works )")))),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Value"),(0,a.yg)("th",{parentName:"tr",align:null},"Authentication Mode"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"0"),(0,a.yg)("td",{parentName:"tr",align:null},"Open (Default)")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"1"),(0,a.yg)("td",{parentName:"tr",align:null},"WEP-128")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"2"),(0,a.yg)("td",{parentName:"tr",align:null},"WPA1")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"3"),(0,a.yg)("td",{parentName:"tr",align:null},"Mixed WPA1 and WPA2-PSK")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"4"),(0,a.yg)("td",{parentName:"tr",align:null},"WPA2-PSK")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"5"),(0,a.yg)("td",{parentName:"tr",align:null},"Not used")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"6"),(0,a.yg)("td",{parentName:"tr",align:null},"AD hoc mode (join any ad hoc network)")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"8"),(0,a.yg)("td",{parentName:"tr",align:null},"WPE-64")))),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Figure 1")),(0,a.yg)("h4",{id:"connecting-using-our-wifi-libraries"},"Connecting Using Our WiFi Libraries"),(0,a.yg)("p",null,"Now that you know how to connect to an access point by typing each command it's time to use the libraries and examples we provide."),(0,a.yg)("p",null,"To see code required to connect to an access point go to \u201cFile -> Examples -> Wifi_Shield -> wifi_test\u201d. Change the code to use your own SSID (access point name), and KEY (your access point's password), then upload the sketch to your Arduino IDE."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'#define SSID      " SEEED-MKT "\n#define KEY       " seeed-mkt "\n')),(0,a.yg)("p",null,'With the sketch uploaded to your Arduino board, open the serial monitor window. If the shield was successful in joining the access point an "OK" message will be displayed along with the connection information resulting from the "get everything" command. If the shield failed to join the access point a "Failed" message will be displayed.'),(0,a.yg)("h4",{id:"configuring-the-shield-to-connect-on-power-up"},"Configuring The Shield to Connect On Power-Up"),(0,a.yg)("p",null,"The shield can be configured to connect on power up, you only have to do this once:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},'Send the "set wlan ssid mySSID" command replacing mySSID with your SSID'),(0,a.yg)("li",{parentName:"ol"},'Send the "set wlan join 1" command.'),(0,a.yg)("li",{parentName:"ol"},'Send the "save" command.')),(0,a.yg)("p",null,"Now the shield will connect to the access point automatically on power up."),(0,a.yg)("p",null,"A description of what each command does can be found in the RN-171 datasheet and in the table below."),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Number"),(0,a.yg)("th",{parentName:"tr",align:null},"Commands"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"1"),(0,a.yg)("td",{parentName:"tr",align:null},"set wlan ssid"),(0,a.yg)("td",{parentName:"tr",align:null},'"ssid" is the name of the access point you\'d like to connect to automatically')),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"2"),(0,a.yg)("td",{parentName:"tr",align:null},"set wlan join 1"),(0,a.yg)("td",{parentName:"tr",align:null},"This tells the module to try and connect to the SSID stored in memory automatically.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"3"),(0,a.yg)("td",{parentName:"tr",align:null},"save"),(0,a.yg)("td",{parentName:"tr",align:null},"Store/Save these settings in the Wifi's config file")))),(0,a.yg)("h4",{id:"setting-a-static-ip-address"},"Setting a Static IP Address"),(0,a.yg)("p",null,"To have the shield obtain a static IP address from the access point, once connected to the access point, send the following commands:"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Number"),(0,a.yg)("th",{parentName:"tr",align:null},"Commands"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"1"),(0,a.yg)("td",{parentName:"tr",align:null},"set ip dhcp 0"),(0,a.yg)("td",{parentName:"tr",align:null},"Turn of DHCP .")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"2"),(0,a.yg)("td",{parentName:"tr",align:null},"set ip address"),(0,a.yg)("td",{parentName:"tr",align:null},"Set the IP address you want .")))),(0,a.yg)("h3",{id:"example-3-communicating-with-the-network-"},"Example 3: Communicating With the Network ()"),(0,a.yg)("p",null,"This example will show you how a device such as your PC and/or phone may talk to the WiFi shield."),(0,a.yg)("p",null,"Follow these steps:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Configure the module with step1-7 in Example 2's section ",(0,a.yg)("em",{parentName:"li"},"Connecting By Typing Commands")),(0,a.yg)("li",{parentName:"ol"},'Set the listening IP port to "80" by sending the commands "set ip local 80"'),(0,a.yg)("li",{parentName:"ol"},"Connect/Join your shield to an access point as shown in the step 8 in Example 2's section ",(0,a.yg)("em",{parentName:"li"},"Connecting By Typing Commands")),(0,a.yg)("li",{parentName:"ol"},'Save these setting by sending the "save" command'),(0,a.yg)("li",{parentName:"ol"},'Get the IP address of your shield with the command "get ip". The IP address and port will be displayed to the right of "IP=" in the response (e.g. IP=192.168.0.10:80)'),(0,a.yg)("li",{parentName:"ol"},"Open your web browser and type your shield's IP address in your web browser's URL bar and press Enter to visit it."),(0,a.yg)("li",{parentName:"ol"},"Your Arduino's serial monitor window will display an HTTP response similar to the one below. This is the information that your browser sent to the shield to request data.")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"*OPEN*GET / HTTP/1.1\nHost: 192.168.0.10\nConnection: keep-alive\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36\nAccept-Encoding: gzip, deflate, sdch\nAccept-Language: en-US,en;q=0.8\n")),(0,a.yg)("p",null,"The browser is now waiting for data, the Wifi module can send sensor values, serve web pages, or any other data straight back to the browser! In this case, the browser is waiting for a web page. If the Wifi module responds with an HTML-formatted page, the browser will display it. The next examples will teach you how to do all this fun stuff."),(0,a.yg)("h3",{id:"example-4-using-the-wifi-shield-as-webserver-serving-webpages-from-the-shield"},"Example 4: Using the WiFi Shield as Webserver (Serving Webpages From the Shield)"),(0,a.yg)("p",null,"As you saw in Example 3, an internet/web browser is able to connect to the WiFi shield. Once a connection has been established (when the browser sends its HTTP request), the WiFi shield may then send back HTML code for the browser to display as a webpage. In this example you will learn what is needed for the shield to reply to a web browser."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step One: Arduino Code")),(0,a.yg)("p",null,'Upload the following code to your Arduino board replacing "myssid" and "mypassword" with your accesspoint\'s values respectively:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},'#include <SoftwareSerial.h>\n#include "WiFly.h"\n\n#define SSID      "myssid"\n#define KEY       "mypassword"\n// check your access point\'s security mode, mine was WPA20-PSK\n// if yours is different you\'ll need to change the AUTH constant, see the file WiFly.h for avalable security codes\n#define AUTH      WIFLY_AUTH_WPA2_PSK\n\nint flag = 0;\n\n// Pins\' connection\n// Arduino       WiFly\n//  2    <----\x3e    TX\n//  3    <----\x3e    RX\n\nSoftwareSerial wiflyUart(2, 3); // create a WiFi shield serial object\nWiFly wifly(&wiflyUart); // pass the wifi siheld serial object to the WiFly class\n\nvoid setup()\n{\n    wiflyUart.begin(9600); // start wifi shield uart port\n    Serial.begin(9600); // start the arduino serial port\n    Serial.println("--------- WIFLY Webserver --------");\n\n    // wait for initilization of wifly\n    delay(1000);\n\n    wifly.reset(); // reset the shield\n    delay(1000);\n    //set WiFly params\n\n    wifly.sendCommand("set ip local 80\\r"); // set the local comm port to 80\n    delay(100);\n\n    wifly.sendCommand("set comm remote 0\\r"); // do not send a default string when a connection opens\n    delay(100);\n\n    wifly.sendCommand("set comm open *OPEN*\\r"); // set the string that the wifi shield will output when a connection is opened\n    delay(100);\n\n    Serial.println("Join " SSID );\n    if (wifly.join(SSID, KEY, AUTH)) {\n        Serial.println("OK");\n    } else {\n        Serial.println("Failed");\n    }\n\n    delay(5000);\n\n    wifly.sendCommand("get ip\\r");\n    char c;\n\n    while (wifly.receive((uint8_t *)&c, 1, 300) > 0) { // print the response from the get ip command\n        Serial.print((char)c);\n    }\n\n    Serial.println("Web server ready");\n\n}\n\nvoid loop()\n{\n\n    if(wifly.available())\n    { // the wifi shield has data available\n        if(wiflyUart.find("*OPEN*")) // see if the data available is from an open connection by looking for the *OPEN* string\n        {\n            Serial.println("New Browser Request!");\n            delay(1000); // delay enough time for the browser to complete sending its HTTP request string\n            // send HTTP header\n            wiflyUart.println("HTTP/1.1 200 OK");\n            wiflyUart.println("Content-Type: text/html; charset=UTF-8");\n            wiflyUart.println("Content-Length: 244"); // length of HTML code\n            wiflyUart.println("Connection: close");\n            wiflyUart.println();\n\n            // send webpage\'s HTML code\n            wiflyUart.print("<html>");\n            wiflyUart.print("<head>");\n            wiflyUart.print("<title>My WiFI Shield Webpage</title>");\n            wiflyUart.print("</head>");\n            wiflyUart.print("<body>");\n            wiflyUart.print("<h1>Hello World!</h1>");\n            wiflyUart.print("<h3>This website is served from my WiFi module</h3>");\n            wiflyUart.print("<a href=\\"http://yahoo.com\\">Yahoo!</a> <a href=\\"http://google.com\\">Google</a>");\n            wiflyUart.print("<br/><button>My Button</button>");\n            wiflyUart.print("</body>");\n            wiflyUart.print("</html>");\n        }\n    }\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step Two: Get the Shield's IP Address")),(0,a.yg)("p",null,'Open the serial monitor window and wait for the "Web server ready" message to display. The serial monitor will also display the WiFi shield\'s IP address:'),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-led-control-serial-comm-window.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Arduino program serial comm output. The IP address of the shield is highlighted.")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step Three: Visiting the webpage")),(0,a.yg)("p",null,"Now visit that IP address in your web browser. The webpage below should be displayed, it contains a link to Yahoo! and Google and a button that doesn't do anything (yet):"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-simple-webserver-page.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"A simple webpage with two links and one button served from the WiFi shield.")),(0,a.yg)("p",null,'When the webpage is visited the serial monitor window will also display a "New Browser Request!" string as shown below:'),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-simple-webserver-arduino-serial-window-response.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"The Arduino serial comm window showing that it detected a new browser connection/request.")),(0,a.yg)("div",{class:"admonition note"},(0,a.yg)("p",{class:"admonition-title"},"Note"),"In case of some browsers, like Google Chrome, even typing the URL in the bar sends a webpage request, this is because these browsers try to get the webpage's title for the user's convenience even before he/she visits the webpage."),(0,a.yg)("h3",{id:"example-5-controlling-the-arduino-digital-pins-from-a-webpage-toggling-leds-from-an-webpage"},"Example 5: Controlling The Arduino Digital Pins From a Webpage (Toggling LEDs From an Webpage)"),(0,a.yg)("p",null,"In this example we will create a webpage with three buttons to control three different digital pins in the Arduino."),(0,a.yg)("p",null,"For this tutorial follow the steps below. We have also created a video where we explain the code in more detail."),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=ek63patAl80"},"Video - WiFi Shield Arduino Digital Pin Control From Webpage")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 1: Hardware")),(0,a.yg)("p",null,"Connect three LEDs and resistor to digital pins 11, 12, and 13 as shown in the schematic below:"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-led-control-schematic.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Three LEDs and 1k resistors connected to pins 11, 12, and 13.")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 2: Arduino Sketch")),(0,a.yg)("p",null,'Upload the following code to your Arduino board but replace "mySSID" and "myPassword" with your access point\'s SSID name and password:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},'#include <SoftwareSerial.h>\n#include "WiFly.h"\n\n#define SSID      "mySSID"\n#define KEY       "myPassword"\n// check your access point\'s security mode, mine was WPA20-PSK\n// if yours is different you\'ll need to change the AUTH constant, see the file WiFly.h for avalable security codes\n#define AUTH      WIFLY_AUTH_WPA2_PSK\n\nint flag = 0;\n\n// Pins\' connection\n// Arduino       WiFly\n//  2    <----\x3e    TX\n//  3    <----\x3e    RX\n\nSoftwareSerial wiflyUart(2, 3); // create a WiFi shield serial object\nWiFly wifly(&wiflyUart); // pass the wifi siheld serial object to the WiFly class\nchar ip[16];\n\nvoid setup()\n{\n    pinMode(11,OUTPUT);\n    digitalWrite(11,LOW);\n\n    pinMode(12,OUTPUT);\n    digitalWrite(12,LOW);\n\n    pinMode(13,OUTPUT);\n    digitalWrite(13,LOW);\n\n    wiflyUart.begin(9600); // start wifi shield uart port\n\n    Serial.begin(9600); // start the arduino serial port\n    Serial.println("--------- WIFLY Webserver --------");\n\n    // wait for initilization of wifly\n    delay(1000);\n\n    wifly.reset(); // reset the shield\n    delay(1000);\n    //set WiFly params\n\n    wifly.sendCommand("set ip local 80\\r"); // set the local comm port to 80\n    delay(100);\n\n    wifly.sendCommand("set comm remote 0\\r"); // do not send a default string when a connection opens\n    delay(100);\n\n    wifly.sendCommand("set comm open *OPEN*\\r"); // set the string that the wifi shield will output when a connection is opened\n    delay(100);\n\n    Serial.println("Join " SSID );\n    if (wifly.join(SSID, KEY, AUTH)) {\n        Serial.println("OK");\n    } else {\n        Serial.println("Failed");\n    }\n\n    delay(5000);\n\n    wifly.sendCommand("get ip\\r");\n\n    wiflyUart.setTimeout(500);\n    if(!wiflyUart.find("IP="))\n    {\n        Serial.println("can not get ip");\n        while(1);;\n    }else\n    {\n        Serial.print("IP:");\n    }\n\n    char c;\n    int index = 0;\n    while (wifly.receive((uint8_t *)&c, 1, 300) > 0) { // print the response from the get ip command\n        if(c == \':\')\n        {\n            ip[index] = 0;\n            break;\n        }\n        ip[index++] = c;\n        Serial.print((char)c);\n        ?\n    }\n    Serial.println();\n    while (wifly.receive((uint8_t *)&c, 1, 300) > 0);;\n    Serial.println("Web server ready");\n}\n\nvoid loop()\n{\n    if(wifly.available())       // the wifi shield has data available\n    {\n\n        if(wiflyUart.find("*OPEN*")) // see if the data available is from an open connection by looking for the *OPEN* string\n        {\n            Serial.println("New Browser Request!");\n            delay(1000); // delay enough time for the browser to complete sending its HTTP request string\n\n            if(wiflyUart.find("pin=")) // look for the string "pin=" in the http request, if it\'s there then we want to control the LED\n            {\n                Serial.println("LED Control");\n                // the user wants to toggle the LEDs\n                int pinNumber = (wiflyUart.read()-48); // get first number i.e. if the pin 13 then the 1st number is 1\n                int secondNumber = (wiflyUart.read()-48);\n                if(secondNumber>=0 && secondNumber<=9)\n                {\n                    pinNumber*=10;\n                    pinNumber +=secondNumber; // get second number, i.e. if the pin number is 13 then the 2nd number is 3, then add to the first number\n                }\n                digitalWrite(pinNumber, !digitalRead(pinNumber)); // toggle pin\n                // Build pinstate string. The Arduino replies to the browser with this string.\n                String pinState = "Pin ";\n                pinState+=pinNumber;\n                pinState+=" is ";\n                if(digitalRead(pinNumber)) // check if the pin is ON or OFF\n                {\n                    pinState+="ON"; // the pin is on\n                }\n                else\n                {\n                    pinState+="OFF";  // the pin is off\n                }\n                // build HTTP header Content-Length string.\n                String contentLength="Content-Length: ";\n                contentLength+=pinState.length(); // the value of the length is the lenght of the string the Arduino is replying to the browser with.\n                // send HTTP header\n                wiflyUart.println("HTTP/1.1 200 OK");\n                wiflyUart.println("Content-Type: text/html; charset=UTF-8");\n                wiflyUart.println(contentLength); // length of HTML code\n                wiflyUart.println("Connection: close");\n                wiflyUart.println();\n                // send response\n                wiflyUart.print(pinState);\n            }\n            else\n            {\n                // send HTTP header\n                wiflyUart.println("HTTP/1.1 200 OK");\n                wiflyUart.println("Content-Type: text/html; charset=UTF-8");\n                wiflyUart.println("Content-Length: 540"); // length of HTML code\n                wiflyUart.println("Connection: close");\n                wiflyUart.println();\n\n                // send webpage\'s HTML code\n                wiflyUart.print("<html>");\n                wiflyUart.print("<head>");\n                wiflyUart.print("<title>WiFi Shield Webpage</title>");\n                wiflyUart.print("</head>");\n                wiflyUart.print("<body>");\n                wiflyUart.print("<h1>LED Toggle Webpage</h1>");\n                // In the <button> tags, the ID attribute is the value sent to the arduino via the "pin" GET parameter\n                wiflyUart.print("<button id=\\"11\\" class=\\"led\\">Toggle Pin 11</button> "); // button for pin 11\n                wiflyUart.print("<button id=\\"12\\" class=\\"led\\">Toggle Pin 12</button> "); // button for pin 12\n                wiflyUart.print("<button id=\\"13\\" class=\\"led\\">Toggle Pin 13</button> "); // button for pin 13\n                wiflyUart.print("<script src=\\"http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\\"><\/script>");\n                wiflyUart.print("<script type=\\"text/javascript\\">");\n                wiflyUart.print("$(document).ready(function(){");\n                wiflyUart.print("$(\\".led\\").click(function(){");\n                wiflyUart.print("var p = $(this).attr(\'id\');"); // get id value (i.e. pin13, pin12, or pin11)\n                // send HTTP GET request to the IP address with the parameter "pin" and value "p", then execute the function\n                // IMPORTANT: dont\' forget to replace the IP address and port with YOUR shield\'s IP address and port\n                wiflyUart.print("$.get(\\"http://");\n                wiflyUart.print(ip);\n                wiflyUart.print(":80/a\\", {pin:p},function(data){alert(data)});");// execute get request. Upon return execute the "function" (display an alert with the "data" send back to the browser.\n                wiflyUart.print("});");\n                wiflyUart.print("});");\n                wiflyUart.print("<\/script>");\n                wiflyUart.print("</body>");\n                wiflyUart.print("</html>");\n            }\n            Serial.println("Data sent to browser");\n        }\n    }\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 3: Serial Monitor Window")),(0,a.yg)("p",null,'Open the serial monitor window and wait for the "Web server ready" message to display. The serial monitor will also display the WiFi shield\'s IP address:'),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-led-control-serial-comm-window.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Arduino program serial comm output. The IP address of the shield is highlighted.")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 4: Visit The Webpage")),(0,a.yg)("p",null,"Visit the IP address in a web browser. A webpage with three buttons, like the one below, should display. Click on the buttons to control the LEDs."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-led-control-webpage.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"LED control webpage served from the WiFi shield.")),(0,a.yg)("p",null,"The Arduino will also respond back to the web browser with the pin's state, the browser will display this in an alert window."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-led-control-arduino-response.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Alert dialog displaying the state of Pin12, The string Pin12 is ON was sent from the Arduino.")),(0,a.yg)("p",null,"The serial monitor window will also show when a browser sends a request to either visit the webpage or control the LED pins."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-led-control-serial-comm-response.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Arduino serial comm output when an HTTP request is sent to the shield.")),(0,a.yg)("h3",{id:"example-6-wifi-shield-and-android-app"},"Example 6: WiFi Shield and Android App"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Androidapp-ethernet-shield-led-toggle.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"The Android app you can use to control the Arduino's pins through the WiFi or Ethernet Shield.")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Android Application")),(0,a.yg)("p",null,"We've created an Android app that can toggle the digital pins in the Arduino through the WiFi shield, to see how the app works and learn about the code watch the video in this link:"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=0R709uGvkWM"},"Video - WiFi Shield Android App for Arduino Pin Control")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Software")),(0,a.yg)("p",null,"Download the Android Studio project/source form this ",(0,a.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFiShieldLEDControl.zip",title:"WiFiShieldLEDControl.zip"},"link:")),(0,a.yg)("h3",{id:"example-7-sending-data-to-and-retrieving-data-from-an-external-server"},"Example 7: Sending Data To and Retrieving Data From an External Server"),(0,a.yg)("p",null,"The RN-171 module in the WiFi shield has the ability to act as an HTML client (a text based web browser essentially), this means that we can use the shield to send and receive data from a web server. In this example you will learn to use the shield with a web Application Programming Interface (API) that displays any city's weather data (i.e. temperature, humidity, etc)."),(0,a.yg)("p",null,"The name of the API we'll use is ",(0,a.yg)("a",{parentName:"p",href:"http://openweathermap.org/api"},"OpenWeatherMap"),", when you send the name of a city and country to this website it returns a JSON string with weather information.  If you want to display the weather for London UK for example, please refer to the toturial in this link ",(0,a.yg)("a",{parentName:"p",href:"http://openweathermap.org/appid"},"http://openweathermap.org/appid")," .Starting from 9 Oct 2015, the website requires users to sign up for a API key before visiting the API. Once you have got the API key, you will be able to visit the following URL ",(0,a.yg)("a",{parentName:"p",href:"http://api.openweathermap.org/data/2.5/weather?q=London"},"http://api.openweathermap.org/data/2.5/weather?q=London"),",uk which would return a JSON string like the following, where the weather data and other information is embedded."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'{\n    "coord":{"lon":-0.13,"lat":51.51},\n    "sys":{"type":3,"id":60992,"message":0.0079,"country":"GB","sunrise":1421395087,"sunset":1421425352},\n    "weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],\n    "base":"cmc stations",\n    "main":{\n        "temp":277.25,"humidity":79,"pressure":998.4,\n        "temp_min":277.25,"temp_max":277.25\n    },\n    "wind":{\n    "speed":2,"gust":5,"deg":180},\n    "rain":{"3h":0},"clouds":{"all":32},\n    "dt":1421372140,"id":2643743,"name":"London","cod":200\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 1: The URL")),(0,a.yg)("p",null,"Let us go ahead and retrieve the weather JSON string for San Francisco, US. The URL our WiFi shield needs to visit is the following (you may test it in your web browser):"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"http://api.openweathermap.org/data/2.5/weather?q=San%20Francisco,US\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 2: The Arduino Code")),(0,a.yg)("p",null,"Section 13 of the ",(0,a.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFly-RN-UM.pdf"},"WiFly manual")," teaches you different ways to connect to a web server, but in all cases we need to specify the name of the server (or IP address if the server does not have a domain name), and then the data we wish to send."),(0,a.yg)("p",null,"The commands we need to send to the WiFi shield to receive the JSON string from the OpenWeatherMap server are the following:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"set ip proto 18 //enable html client\nset dns name api.openweathermap.org //name of your webserver\nset ip address 0 // so WiFly will use DNS\nset ip remote 80 // standard webserver port\nset com remote 0 // turn off the REMOTE string so it does not interfere with the post\nopen // to open the connection\nGET /data/2.5/weather?q=San%20Francisco,US \\n\\n // to send the data\n")),(0,a.yg)("p",null,"This is the arduino code that will send the commands:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},'#include <SoftwareSerial.h>\n#include "WiFly.h"\n\n#define SSID      "mySSID"\n#define KEY       "myPassword"\n// check your access point\'s security mode, mine was WPA20-PSK\n// if yours is different you\'ll need to change the AUTH constant, see the file WiFly.h for avalable security codes\n#define AUTH      WIFLY_AUTH_WPA2_PSK\n\n// Pins\' connection\n// Arduino       WiFly\n//  2    <----\x3e    TX\n//  3    <----\x3e    RX\n\nSoftwareSerial wiflyUart(2, 3); // create a WiFi shield serial object\nWiFly wifly(&wiflyUart); // pass the wifi siheld serial object to the WiFly class\n\nvoid setup()\n{\n    wiflyUart.begin(9600); // start wifi shield uart port\n    Serial.begin(9600); // start the arduino serial port\n    Serial.println("--------- OpenWeatherMap API --------");\n\n    // wait for initilization of wifly\n    delay(3000);\n    wifly.reset(); // reset the shield\n    Serial.println("Join " SSID );\n    if (wifly.join(SSID, KEY, AUTH)) {\n        Serial.println("OK");\n    } else {\n        Serial.println("Failed");\n    }\n\n    delay(5000);\n\n    wifly.sendCommand("set ip proto 18\\r"); //enable html client\n    delay(100);\n\n    wifly.sendCommand("set dns name api.openweathermap.org\\r"); // name of the webserver we want to connect to\n    delay(100);\n\n    wifly.sendCommand("set ip address 0\\r"); // so WiFly will use DNS\n    delay(100);\n\n    wifly.sendCommand("set ip remote 80\\r"); /// standard webserver port\n    delay(100);\n\n    wifly.sendCommand("set com remote 0\\r"); // turn off the REMOTE string so it does not interfere with the post\n    delay(100);\n\n    wifly.sendCommand("open\\r"); // open connection\n    delay(100);\n\n    wiflyUart.print("GET /data/2.5/weather?q=San%20Francisco,US \\n\\n");\n    delay(1000);\n\n}\n\nvoid loop()\n{\n    //As soon as the data  received from the Internet ,output the data through the UART Port .\n    while (wifly.available())\n    {\n        Serial.write(wifly.read());\n    }\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 3: Result")),(0,a.yg)("p",null,"Open the serial monitor window, you should be able to see the same JSON string you saw in the browser."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Open-weather-api-json-string.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"JSON weather string shown in the Arduino serial monitor window.")),(0,a.yg)("h3",{id:"example-8-tcp-communication-with-terminal"},"Example 8: TCP Communication With Terminal"),(0,a.yg)("p",null,"In this example we'll show you how to send information from the WiFi shield to a PC terminal program. We'll make a simple Arduino console with menus that will give you the option to see the Arduino digital pin's state and toggle them."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 1: Download a TCP Terminal")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"http://sourceforge.net/projects/realterm/files/Realterm/2.0.0.70/Realterm_2.0.0.70_setup.exe/download"},"Download and install RealTerm"),", a utility terminal that will allow us to connect to the WiFi shield."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 2: Arduino Code")),(0,a.yg)("p",null,'Upload the code below to your Arduino board replacing "mySSID", "myPassword", and authentication code with your own access point\'s information:'),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-c"},'#include <SoftwareSerial.h>\n#include "WiFly.h"\n\n#define SSID      "mySSID"\n#define KEY       "myPassword"\n// check your access point\'s security mode, mine was WPA20-PSK\n// if yours is different you\'ll need to change the AUTH constant, see the file WiFly.h for avalable security codes\n#define AUTH      WIFLY_AUTH_WPA2_PSK\n\n#define FLAG_MAIN_MENU 1\n#define FLAG_SUB_MENU_2 2\n\nint flag = FLAG_MAIN_MENU;\n\n// Pins\' connection\n// Arduino       WiFly\n//  2    <----\x3e    TX\n//  3    <----\x3e    RX\n\nSoftwareSerial wiflyUart(2, 3); // create a WiFi shield serial object\nWiFly wifly(&wiflyUart); // pass the wifi siheld serial object to the WiFly class\n\nvoid setup()\n{\n\n    // define the pins we can control\n    pinMode(11,OUTPUT);\n    digitalWrite(11,LOW);\n\n    pinMode(12,OUTPUT);\n    digitalWrite(12,LOW);\n\n    pinMode(13,OUTPUT);\n    digitalWrite(13,LOW);\n\n    pinMode(7,OUTPUT);\n    digitalWrite(7,LOW);\n\n    wiflyUart.begin(9600); // start wifi shield uart port\n\n    Serial.begin(9600); // start the arduino serial port\n    Serial.println("--------- TCP Communication --------");\n\n    // wait for initilization of wifly\n    delay(1000);\n\n    wifly.reset(); // reset the shield\n    delay(1000);\n\n    wifly.sendCommand("set ip local 80\\r"); // set the local comm port to 80\n    delay(100);\n\n    wifly.sendCommand("set comm remote 0\\r"); // do not send a default string when a connection opens\n    delay(100);\n\n    wifly.sendCommand("set comm open *\\r"); // set the string or character that the wifi shield will output when a connection is opened "*"\n    delay(100);\n\n    wifly.sendCommand("set ip protocol 2\\r"); // set TCP protocol\n    delay(100);\n\n    Serial.println("Join " SSID );\n    if (wifly.join(SSID, KEY, AUTH)) {\n        Serial.println("OK");\n    } else {\n        Serial.println("Failed");\n    }\n\n    delay(5000);\n\n    wifly.sendCommand("get ip\\r");\n    char c;\n\n    while (wifly.receive((uint8_t *)&c, 1, 300) > 0) { // print the response from the get ip command\n        Serial.print((char)c);\n    }\n\n    Serial.println("TCP Ready");\n}\n\nvoid loop()\n{\n\n    if(wifly.available())\n    {\n        delay(1000); // wait for all the characters to be sent to the WiFi shield\n        char val = wiflyUart.read(); // read the first character\n\n        if(flag == FLAG_MAIN_MENU)\n        {\n            switch(val)\n            {\n                case \'*\': // search for the new connection string\n                printMainMenu();\n                break;\n                case \'1\': // the user typed 1, display the pin states\n                printPinStates();\n                printMainMenu();\n                break;\n                case \'2\': // the user typed 2, display the sub menu (option to select a particular pin)\n                printSubMenu2();\n                flag = FLAG_SUB_MENU_2; // flag to enter the sub menu\n                break;\n                default:\n                wiflyUart.print("INVALID SUBMENU\\r\\n");\n                break;\n            }\n        }\n        else if(flag == FLAG_SUB_MENU_2)\n        {\n            int pinNumber = val-48; // get first number i.e. if the pin 13 then the 1st number is 1\n            int secondNumber = (wiflyUart.read()-48);\n            if(secondNumber>=0 && secondNumber<=9)\n            {\n                pinNumber*=10;\n                pinNumber +=secondNumber; // get second number, i.e. if the pin number is 13 then the 2nd number is 3, then add to the first number\n            }\n\n            // Create the "You want to toggle pin x?? OK..." string.\n            String response = "\\r\\nYou want to toggle pin ";\n            response+=pinNumber;\n            response+="? OK...\\r\\n";\n\n            wiflyUart.print(response);\n\n            digitalWrite(pinNumber, !digitalRead(pinNumber)); // toggle pin\n\n            wiflyUart.print("Pin Toggled!\\r\\n"); // let user know the pin was toggled.\n            printMainMenu();\n            flag = FLAG_MAIN_MENU;\n        }\n    }\n\n}\n\n/*\n* Prints the main menu options\n*/\nvoid printMainMenu()\n{\n    wiflyUart.print("\\r\\n\\r\\n");\n    wiflyUart.print("Arduino Console Menu: \\r\\n");\n    wiflyUart.print("1. Show digital pin states\\r\\n");\n    wiflyUart.print("2. Toggle a digital pin\'s state\\r\\n");\n    wiflyUart.print("\\r\\n\\r\\n");\n}\n\n// displays the pin states\nvoid printPinStates()\n{\n\n    String pinState = "Pin 7 is ";\n    pinState+=getPinState(7);\n    pinState+="\\r\\n";\n\n    pinState += "Pin 11 is ";\n    pinState+=getPinState(11);\n    pinState+="\\r\\n";\n\n    pinState += "Pin 12 is ";\n    pinState+=getPinState(12);\n    pinState+="\\r\\n";\n\n    pinState += "Pin 13 is ";\n    pinState+=getPinState(13);\n    pinState+="\\r\\n";\n\n    wiflyUart.print(pinState);\n}\n\n// prints the option to enter a pin number\nvoid printSubMenu2()\n{\n    wiflyUart.print("\\r\\nEnter the pin number you wish to toggle: ");\n}\n?\n// get a pin state as a string.\nString getPinState(int pinNumber)\n{\n    if(digitalRead(pinNumber)) // check if the pin is ON or OFF\n    {\n        return "ON"; // the pin is on\n    }\n    else\n    {\n        return "OFF";  // the pin is off\n    }\n}\n')),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 3: Obtain the Shield's IP Address and Port")),(0,a.yg)("p",null,"Open the Arduino serial monitor window to obtain the WiFiShield's IP address and port number, highlighted in the image below."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Tcp-arduino-serial-comm.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Arduino serial monitor window output from TCP example, the ip address and port number are highlighted.")),(0,a.yg)("p",null,"In the image above the IP Address and Port would be the following:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"192.168.0.10:80\n")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Step 4: Configure The TCP Terminal and Connect to The Shield")),(0,a.yg)("p",null,'Open RealTerm and in the "Display" tab enter "30" for "Rows" and select the "Scrollback" option:'),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Realterm-display-tab.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"RealTerm window: rows = 30, and Scrollback option checked.")),(0,a.yg)("p",null,'In the "Port" tab of the RealTerm program, type your shield\'s IP address and port e.g. 192.168.0.10:80, then click the "Open" button, the Arduino\'s hard coded main menu should display in the terminal.'),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Realterm-port-tab.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"RealTerm window. Port field has WiFi shield's IP address and port number. The Arduino's menu is displayed")),(0,a.yg)("p",null,'In the "Send" tab select one of the options from the menu either "1" or "2", enter it in the text box and press "Send ASCII" to send the value.'),(0,a.yg)("p",null,'For example, to toggle pin 13 enter "2" and press "Send ASCII", then when prompted "Enter the pin number you wish you toggle" enter "13" and click "Send ASCII". The Arduino should reply "Pin Toggled!" and go back to the main menu, now enter "1" and press "Send ASCII" to see the present state of the pins.'),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Realterm-send-tab.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"RealTerm window. The state of pin 13 was changed from OFF to ON as shown in the yellow text.")),(0,a.yg)("h3",{id:"example-9-wifi-shield-and-relay-shield"},"Example 9: WiFi Shield and Relay Shield"),(0,a.yg)("p",null,"Now that you know how to send and receive information to and from the WiFi shield you can see how easy it would be to control any kind of device via the web."),(0,a.yg)("p",null,"If you wish to control high power devices such as your desk lamp, a motor, or a water pump via a webpage or phone application we recommend our ",(0,a.yg)("a",{parentName:"p",href:"/Relay_Shield_v3"},"Relay Shield V2.0"),"."),(0,a.yg)("p",null,"The Relay Shield V2.0 uses pins 4, 5, 6, and 7 so it is fully compatible with the code in the examples in this page."),(0,a.yg)("h3",{id:"example-10-adhoc-mode"},"Example 10: Adhoc Mode"),(0,a.yg)("p",null,"To use the shield in Adhoc mode, as an access point, simply connect pin IO9 from the shield to the 3.3V pin in the Arduino, as shown below, and reset the shield if it was on."),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/img/Wifi-shield-adhoc-mode-hardware-connection.png",alt:null})),(0,a.yg)("p",null,(0,a.yg)("em",{parentName:"p"},"Shield connection required for adhoc mode. Pin IO9 of the shield connected to 3.3V.")),(0,a.yg)("p",null,"To obtain the shield's SSID upload the code in Example 1 to your Arduino and open the serial monitor, the shield will respond with it's SSID as in the example below, where in this case ",(0,a.yg)("strong",{parentName:"p"},"WiFly-EZX-1b")," is the SSID."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"AP mode as WiFly-EZX-1b on chan 1\n")),(0,a.yg)("p",null,"You should now be able to connect to your WiFi shield as an access point, for example the SSID should be visible in your PC's list of WiFi networks available."),(0,a.yg)("p",null,"To learn more about adhoc mode check out the ",(0,a.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFly-RN-UM.pdf"},"WiFly RN User Manual"),' section 16 "Adhoc Networking Mode"'),(0,a.yg)("h2",{id:"faqs"},"FAQs"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Q1: How to set a configuration when using WiFi shield with Mega?")),(0,a.yg)("p",null,"A1: Please follow below instructions. More information about Software serial please refer to ",(0,a.yg)("a",{parentName:"p",href:"https://arduino.cc/en/Reference/SoftwareSerial"},"SoftwareSerial Library"),"."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Connect D2 to D10 then D3 to D11 by jumper wires"),(0,a.yg)("li",{parentName:"ul"},"Modify the program: Wifly(2,3); \u2192 Wifly(10,11);")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Q2: Is Wifi Shield compatible with Arduino Due?")),(0,a.yg)("p",null,"A2: Wifi shield can work with Arduino Due. On hardware, you can connect them via one of the four Serial Ports on Arduino Due(If you use Serial 1-3, you may need to make the connection with jumper wires). The current wifi shield library uses SoftwareSerial, you should modify it to Serial port of Arduino Due."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Q3: How to improve the connectivity between the Wifi Shield and the router?")),(0,a.yg)("p",null,"A3: Do not place plastic or any other dielectric material in touch with the antenna. Any metallic objects in close proximity to the antenna will prevent the antenna from radiating freely."),(0,a.yg)("h2",{id:"schematic-online-viewer"},"Schematic Online Viewer"),(0,a.yg)("div",{className:"altium-ecad-viewer","data-project-src":"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/Wifi_Shield_v2.0.zip",style:{borderRadius:"0px 0px 4px 4px",height:500,borderStyle:"solid",borderWidth:1,borderColor:"rgb(241, 241, 241)",overflow:"hidden",maxWidth:1280,maxHeight:700,boxSizing:"border-box"}}),(0,a.yg)("h2",{id:"resources"},"Resources"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/Wifi_Shield_v2.0.zip"},"WiFi Shield V2.0 Eagle Files")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/Wifi_shield_v2_schematic.pdf"},"Schematic PDF")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFly-RN-171.pdf"},"RN-171 Datasheet")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://github.com/Seeed-Studio/WiFi_Shield"},"Wifi Shield Library")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/Wifi_Shield_V2.0/res/WiFly-RN-UM.pdf"},"WiFi Module User Manual")," ",(0,a.yg)("em",{parentName:"li"},"-- This is where you'll find all the commands for the RN-171 module in the shield.")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"/Seeeduino_v4.2"},"What is a Seeeduino")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"http://www.w3schools.com/"},"w3schools")," Great website to learn HTML, Javascript, and JQuery")),(0,a.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,a.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,a.yg)("div",{class:"button_tech_support_container"},(0,a.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,a.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,a.yg)("div",{class:"button_tech_support_container"},(0,a.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,a.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}g.isMDXComponent=!0}}]);