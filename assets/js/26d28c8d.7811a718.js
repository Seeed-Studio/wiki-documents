"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[12170],{15680:(e,t,o)=>{o.d(t,{xA:()=>c,yg:()=>u});var r=o(96540);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var d=r.createContext({}),l=function(e){var t=r.useContext(d),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},c=function(e){var t=l(e.components);return r.createElement(d.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,i=e.originalType,d=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(o),h=n,u=p["".concat(d,".").concat(h)]||p[h]||g[h]||i;return o?r.createElement(u,a(a({ref:t},c),{},{components:o})):r.createElement(u,a({ref:t},c))}));function u(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=o.length,a=new Array(i);a[0]=h;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s[p]="string"==typeof e?e:n,a[1]=s;for(var l=2;l<i;l++)a[l]=o[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,o)}h.displayName="MDXCreateElement"},21031:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>g,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=o(9668),n=(o(96540),o(15680));const i={description:"Send data from Watcher & Node-RED to Discord",title:"Watcher & Node-RED to Discord",keywords:["Watcher","Discord","Node-RED"],image:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Watcher_Discord_Cover.png",slug:"/watcher_node_red_to_discord",last_update:{date:"08/02/2024",author:"Vincent"}},a="Watcher To Discord Quick Start",s={unversionedId:"Sensor/SenseCAP/SenseCAP_Watcher/Applications/node_red_integration/watcher_to_discord",id:"Sensor/SenseCAP/SenseCAP_Watcher/Applications/node_red_integration/watcher_to_discord",title:"Watcher & Node-RED to Discord",description:"Send data from Watcher & Node-RED to Discord",source:"@site/docs/Sensor/SenseCAP/SenseCAP_Watcher/Applications/node_red_integration/watcher_to_discord.md",sourceDirName:"Sensor/SenseCAP/SenseCAP_Watcher/Applications/node_red_integration",slug:"/watcher_node_red_to_discord",permalink:"/watcher_node_red_to_discord",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SenseCAP/SenseCAP_Watcher/Applications/node_red_integration/watcher_to_discord.md",tags:[],version:"current",lastUpdatedBy:"Vincent",lastUpdatedAt:1722556800,formattedLastUpdatedAt:"Aug 2, 2024",frontMatter:{description:"Send data from Watcher & Node-RED to Discord",title:"Watcher & Node-RED to Discord",keywords:["Watcher","Discord","Node-RED"],image:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Watcher_Discord_Cover.png",slug:"/watcher_node_red_to_discord",last_update:{date:"08/02/2024",author:"Vincent"}},sidebar:"ProductSidebar",previous:{title:"Watcher & Node-RED to Twilio",permalink:"/watcher_node_red_to_twilio"},next:{title:"Watcher & Node-RED to MongoDB",permalink:"/watcher_node_red_to_mongodb"}},d={},l=[{value:"Part 1. Set up Watcher in Node-RED",id:"part-1-set-up-watcher-in-node-red",level:2},{value:"Step 1. Set up Node-RED",id:"step-1-set-up-node-red",level:3},{value:"Step 2. Prepare data from Watcher",id:"step-2-prepare-data-from-watcher",level:3},{value:"Example Node-RED Function to Format Data",id:"example-node-red-function-to-format-data",level:4},{value:"Part 2. Set up Discord Bot",id:"part-2-set-up-discord-bot",level:2},{value:"Step 3. Sign up for Discord",id:"step-3-sign-up-for-discord",level:3},{value:"Step 4. Create Development Application",id:"step-4-create-development-application",level:3},{value:"Step 5. Configure Bot Settings",id:"step-5-configure-bot-settings",level:3},{value:"Step 6. Configure OAuth2 Settings",id:"step-6-configure-oauth2-settings",level:3},{value:"Step 7. Grant Bot Access to Server",id:"step-7-grant-bot-access-to-server",level:3},{value:"Step 8. Obtain Channel ID",id:"step-8-obtain-channel-id",level:3},{value:"Part 3. Integrate Discord with Node-RED",id:"part-3-integrate-discord-with-node-red",level:2},{value:"Step 9. Install Discord module",id:"step-9-install-discord-module",level:3},{value:"Step 10. Configure Discord node",id:"step-10-configure-discord-node",level:3},{value:"Step 11. Deploy",id:"step-11-deploy",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Error: Used disallowed intents",id:"error-used-disallowed-intents",level:3},{value:"DiscordAPIError[50001]: Missing Access",id:"discordapierror50001-missing-access",level:3},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],c={toc:l},p="wrapper";function g(e){let{components:t,...o}=e;return(0,n.yg)(p,(0,r.A)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"watcher-to-discord-quick-start"},"Watcher To Discord Quick Start"),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Watcher_Discord_Cover.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://discord.com/"},(0,n.yg)("strong",{parentName:"a"},"Discord")),' is an instant messaging and VoIP social platform that facilitates communication via voice calls, video calls, text messaging, and media sharing. Conversations on Discord can be private or occur within virtual communities known as "servers."'),(0,n.yg)("p",null,"This tutorial will guide you through integrating the Watcher API with Node-RED to seamlessly send data from the Watcher to Discord. This integration provides a simple and efficient method to ",(0,n.yg)("strong",{parentName:"p"},"receive notifications and opens the door for further applications and integrations"),"."),(0,n.yg)("h2",{id:"part-1-set-up-watcher-in-node-red"},"Part 1. Set up Watcher in Node-RED"),(0,n.yg)("h3",{id:"step-1-set-up-node-red"},"Step 1. Set up Node-RED"),(0,n.yg)("p",null,"Fisrt of all, you need to run a task in Watcher following the video below. If you want to know more ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/getting_started_with_watcher_task/"},"please click here"),"."),(0,n.yg)("div",{class:"table-center"},(0,n.yg)("iframe",{width:"600",height:"338",src:"https://files.seeedstudio.com/wiki/watcher_to_open_interpreter_image/run_task.mp4?autoplay=0",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}," ")),(0,n.yg)("p",null,"Node-RED is required for this setup, along with the Watcher API. If you haven't installed Node-RED or connected it with the Watcher API, start here: ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/watcher_to_node_red"},(0,n.yg)("strong",{parentName:"a"},"Watcher to Node-RED Quick Start")),"."),(0,n.yg)("h3",{id:"step-2-prepare-data-from-watcher"},"Step 2. Prepare data from Watcher"),(0,n.yg)("p",null,"After setting up the Watcher to work with Node-RED, the next step is to prepare the data from the Watcher for Discord. Double click the function node to format the data appropriately."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_1.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"For the purpose of this tutorial, we will be sending the content as well as the the image. However, you are encouraged to transform the data as needed for your application."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_2.png",style:{width:700,height:"auto"}})),(0,n.yg)("h4",{id:"example-node-red-function-to-format-data"},"Example Node-RED Function to Format Data"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"node.send({ payload: msg.payload.value[0].content });\n\nnode.send({ payload: msg.payload.value[0].image_url });\n")),(0,n.yg)("h2",{id:"part-2-set-up-discord-bot"},"Part 2. Set up Discord Bot"),(0,n.yg)("h3",{id:"step-3-sign-up-for-discord"},"Step 3. Sign up for Discord"),(0,n.yg)("p",null,"A Discord account is required to proceed. If you do not already have an account, please ",(0,n.yg)("a",{parentName:"p",href:"https://discord.com"},(0,n.yg)("strong",{parentName:"a"},"click here"))," and complete the steps to create an account."),(0,n.yg)("p",null,"If you already have an account, please proceed to ",(0,n.yg)("a",{parentName:"p",href:"#step-4-create-development-application"},(0,n.yg)("strong",{parentName:"a"},"Step 4")),"."),(0,n.yg)("p",null,"If you already have a Discord bot you would like to configure in Node-RED, please skip to ",(0,n.yg)("a",{parentName:"p",href:"#part-3-integrate-discord-with-node-red"},(0,n.yg)("strong",{parentName:"a"},"Part 3")),"."),(0,n.yg)("h3",{id:"step-4-create-development-application"},"Step 4. Create Development Application"),(0,n.yg)("p",null,"Once you have your Discord account set up and logged in, proceed to the ",(0,n.yg)("a",{parentName:"p",href:"https://discord.com/developers/applications"},(0,n.yg)("strong",{parentName:"a"},"Discord Developer Portal"))," and create a new application."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_1.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Enter a name for your application, agree to the Discord ",(0,n.yg)("a",{parentName:"p",href:"https://support-dev.discord.com/hc/articles/8562894815383-Discord-Developer-Terms-of-Service"},(0,n.yg)("strong",{parentName:"a"},"Developer Terms of Service"))," and ",(0,n.yg)("a",{parentName:"p",href:"https://support-dev.discord.com/hc/articles/8563934450327-Discord-Developer-Policy"},(0,n.yg)("strong",{parentName:"a"},"Developer Policy")),", then click ",(0,n.yg)("strong",{parentName:"p"},"Create"),"."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_2.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"You will need a valid email address linked to your Discord account in order to proceed. If you do not have an email associated with your Discord account, please follow these instructions: ",(0,n.yg)("a",{parentName:"p",href:"https://support.discord.com/hc/en-us/articles/4423385681175-How-to-Change-Your-Account-s-Email-Address"},"How to Change Your Account's Email Address"))),(0,n.yg)("h3",{id:"step-5-configure-bot-settings"},"Step 5. Configure Bot Settings"),(0,n.yg)("p",null,"Now we will configure the bot settings. To do so, follow these steps:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"In the left sidebar of your application page, click on the ",(0,n.yg)("strong",{parentName:"p"},"Bot")," tab under ",(0,n.yg)("strong",{parentName:"p"},"Settings"),".")),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"In the ",(0,n.yg)("strong",{parentName:"p"},"Privileged Gateway Intents")," section, you will see several options. For this tutorial, we only need to enable the ",(0,n.yg)("strong",{parentName:"p"},"MESSAGE CONTENT INTENT"),". This allows your bot to read message content. Toggle the switch next to ",(0,n.yg)("strong",{parentName:"p"},"MESSAGE CONTENT INTENT")," to enable it. When enabled, the switch will turn blue."))),(0,n.yg)("p",null,"Whenever you make a change to your bot, a pop-up will appear at the bottom, prompting you to ",(0,n.yg)("strong",{parentName:"p"},"Save Changes"),". Please ensure you do this before proceeding."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_3.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"Depending on what you intend to do with your application, you may need to enable additional intents. For more complex bot functionalities, you might need to enable other intents like ",(0,n.yg)("strong",{parentName:"p"},"PRESENCE INTENT")," or ",(0,n.yg)("strong",{parentName:"p"},"SERVER MEMBERS INTENT"),". However, for the purpose of this tutorial where we're only sending messages, enabling the ",(0,n.yg)("strong",{parentName:"p"},"MESSAGE CONTENT INTENT")," is sufficient.")),(0,n.yg)("p",null,"While on the Bot page, you'll also see a section titled ",(0,n.yg)("strong",{parentName:"p"},"Token")," toward the top of the page. Click the ",(0,n.yg)("strong",{parentName:"p"},"Reset Token")," button to generate a new token for your bot."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_4.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Be aware that resetting your token will cause your bot to stop working until you update the token in your bot's code. Ensure that you're prepared to update your bot's configuration before proceeding with the reset."),(0,n.yg)("p",null,"You may be prompted for Multi-factor authentication. If so, complete this step as required before proceeding."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_5.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Copy this token and keep it safe. You'll need this token to authenticate your bot in Node-RED later."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_6.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("admonition",{type:"warning"},(0,n.yg)("p",{parentName:"admonition"},"Never share your bot token publicly. Anyone with your token can control your bot. If you accidentally expose your token, immediately reset it on this page.")),(0,n.yg)("h3",{id:"step-6-configure-oauth2-settings"},"Step 6. Configure OAuth2 Settings"),(0,n.yg)("p",null,"Now, switch over to the ",(0,n.yg)("strong",{parentName:"p"},"OAuth2")," tab under ",(0,n.yg)("strong",{parentName:"p"},"Settings")," and scroll down until you see ",(0,n.yg)("strong",{parentName:"p"},"OAuth2 URL Generator"),". Here, we will check the ",(0,n.yg)("strong",{parentName:"p"},"bot")," scope since we are creating a bot application."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_7.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"After selecting the bot scope, a new box will appear that allows you to select ",(0,n.yg)("strong",{parentName:"p"},"Bot Permissions"),". For the purposes of this tutorial, we are going to give the bot ",(0,n.yg)("strong",{parentName:"p"},"Administrator")," permissions, which provides the bot access to all functionalities."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_8.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("admonition",{type:"warning"},(0,n.yg)("p",{parentName:"admonition"},"Granting Administrator permissions to a bot gives it full access to all server functionalities. In a production environment, it's recommended to follow the principle of least privilege and only grant the specific permissions your bot needs for its intended functions.")),(0,n.yg)("p",null,"Finally, scroll down to see your newly generated URL. Copy this URL and paste it into your web browser's address bar."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_9.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("h3",{id:"step-7-grant-bot-access-to-server"},"Step 7. Grant Bot Access to Server"),(0,n.yg)("p",null,"You'll be prompted to select a server where you want to add the bot. Choose the appropriate server from the dropdown menu and click ",(0,n.yg)("strong",{parentName:"p"},"Continue"),"."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_10.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"On the next screen, you'll see a comprehensive list of permissions you're granting to the bot. These permissions are based on what you selected in the OAuth2 URL Generator in ",(0,n.yg)("a",{parentName:"p",href:"#step-6-configure-oauth2-settings"},(0,n.yg)("strong",{parentName:"a"},"Step 6")),". Review each permission carefully, then click ",(0,n.yg)("strong",{parentName:"p"},"Authorize"),"."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_11.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Similar to in ",(0,n.yg)("a",{parentName:"p",href:"#step-5-configure-bot-settings"},(0,n.yg)("strong",{parentName:"a"},"Step 5")),", you may be prompted for multi-factor authentication again. If so, complete this step as required before proceeding."),(0,n.yg)("p",null,"After successful authorization, you'll see a confirmation message indicating that the bot has been added to your selected Discord server. Now, return to your Discord server to continue."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_12.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("h3",{id:"step-8-obtain-channel-id"},"Step 8. Obtain Channel ID"),(0,n.yg)("p",null,"Once you reached your Discord server, click on the gear icon (\u2699\ufe0f) near the bottom of the screen, next to your profile information. This will open your User Settings."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_13.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"In the User Settings sidebar, scroll down to the ",(0,n.yg)("strong",{parentName:"p"},"App Settings")," section and click on ",(0,n.yg)("strong",{parentName:"p"},"Advanced"),". Make sure the ",(0,n.yg)("strong",{parentName:"p"},"Developer Mode")," toggle is switched on."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_14.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Close the User Settings and return to your Discord server. Right-click on the channel you want to use (in this tutorial, we're using the ",(0,n.yg)("strong",{parentName:"p"},"general")," channel). At the bottom of the context menu that appears, click on ",(0,n.yg)("strong",{parentName:"p"},"Copy Channel ID"),". Save this Channel ID for use in your Node-RED flow."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_15.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"The Channel ID is a unique identifier for each Discord channel. Make sure to keep it secure and don't share it publicly.")),(0,n.yg)("h2",{id:"part-3-integrate-discord-with-node-red"},"Part 3. Integrate Discord with Node-RED"),(0,n.yg)("h3",{id:"step-9-install-discord-module"},"Step 9. Install Discord module"),(0,n.yg)("p",null,"Click the three bars icon and then click ",(0,n.yg)("strong",{parentName:"p"},"Manage palette")," option. This opens a new window where you can add or remove nodes."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_2.5.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Switch to the ",(0,n.yg)("strong",{parentName:"p"},"Install")," tab within the palette management window. In the search bar, type ",(0,n.yg)("inlineCode",{parentName:"p"},"discord")," to find the module. Then, click the ",(0,n.yg)("strong",{parentName:"p"},"install")," button next to the ",(0,n.yg)("strong",{parentName:"p"},"node-red-contrib-discord-advanced")," entry."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_3.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"We also recommend reviewing the ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/Markoudstaal/node-red-contrib-discord-advanced/blob/main/README.md"},(0,n.yg)("strong",{parentName:"a"},"node's documentation"))," and the associated ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/Markoudstaal/node-red-contrib-discord-advanced"},(0,n.yg)("strong",{parentName:"a"},"Github repository"))," if you want a more in-depth understanding of how the module works and how to maximize its potential."),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"The ",(0,n.yg)("strong",{parentName:"p"},"node-red-contrib-discord-advanced")," module is recommended for its current compatibility and reliability at the time of writing this tutorial (August 2024). However, the availability and functionality of Node-RED modules can vary over time. It's advisable to review the most recent user feedback and compatibility notes in the Node-RED library or GitHub repositories. If you encounter issues with this module, consider exploring other Discord modules listed in the Node-RED library for a more suitable option.")),(0,n.yg)("h3",{id:"step-10-configure-discord-node"},"Step 10. Configure Discord node"),(0,n.yg)("p",null,"After installing the Discord module, drag the ",(0,n.yg)("strong",{parentName:"p"},"discordMessageManager")," node to your Node-RED flow and connect it to the function node"),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_4.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Double-click the ",(0,n.yg)("strong",{parentName:"p"},"discordMessageManager")," node to open its configuration panel. Click the plus icon next to the ",(0,n.yg)("strong",{parentName:"p"},"token")," field to add a new Discord API token configuration."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_5.png",style:{width:700,height:"auto"}})),(0,n.yg)("p",null,"In the new window, enter the following information:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Token: Enter the token you obtained in ",(0,n.yg)("a",{parentName:"li",href:"#step-5-configure-bot-settings"},(0,n.yg)("strong",{parentName:"a"},"Step 5"))),(0,n.yg)("li",{parentName:"ul"},"Name: Give a name for your token configuration")),(0,n.yg)("p",null,"Then, click ",(0,n.yg)("strong",{parentName:"p"},"Add")," or ",(0,n.yg)("strong",{parentName:"p"},"Update")," to save the configuration."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_6.png",style:{width:700,height:"auto"}})),(0,n.yg)("p",null,"In the ",(0,n.yg)("strong",{parentName:"p"},"Channel")," field, enter the Channel ID you obtained in ",(0,n.yg)("a",{parentName:"p",href:"#step-8-obtain-channel-id"},"Step 8"),". Then, click ",(0,n.yg)("strong",{parentName:"p"},"Done")," to close the configuration panel."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_6.5.png",style:{width:700,height:"auto"}})),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"For more complex setups with multiple channels and trigger conditions, you can leave the Channel field blank and use ",(0,n.yg)("inlineCode",{parentName:"p"},"msg.channel")," to dynamically set the channel. However, for this basic tutorial, we'll use a static channel ID.")),(0,n.yg)("h3",{id:"step-11-deploy"},"Step 11. Deploy"),(0,n.yg)("p",null,"Finally, click the ",(0,n.yg)("strong",{parentName:"p"},"Deploy")," button at the top right of the Node-RED interface. Once deployed, your Watcher will send messages to Node-RED, which will then forward them to your Discord channel."),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_7.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Discord_16.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"Congratulations! You have successfully configured your Watcher to send messages to Discord through Node-RED. This setup ensures that you receive real-time notifications in your Discord channel whenever your Watcher is triggered. By doing so, you've unlocked a plethora of thrilling opportunities for your development projects. We eagerly anticipate the innovative solutions you'll create next!"),(0,n.yg)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,n.yg)("p",null,"When integrating Discord with Node-RED, you might encounter some errors. Here are two common errors and detailed steps to resolve them:"),(0,n.yg)("h3",{id:"error-used-disallowed-intents"},"Error: Used disallowed intents"),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_Error_1.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"This error occurs when your bot is trying to use intents that haven't been enabled in the Discord Developer Portal. To fix this:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Go to the ",(0,n.yg)("a",{parentName:"li",href:"https://discord.com/developers/applications"},(0,n.yg)("strong",{parentName:"a"},"Discord Developer Portal")),"."),(0,n.yg)("li",{parentName:"ol"},"Select your application."),(0,n.yg)("li",{parentName:"ol"},"Click on ",(0,n.yg)("strong",{parentName:"li"},"Bot")," in the left sidebar."),(0,n.yg)("li",{parentName:"ol"},"Scroll down to the ",(0,n.yg)("strong",{parentName:"li"},"Privileged Gateway Intents")," section."),(0,n.yg)("li",{parentName:"ol"},"Enable the intents your bot needs (commonly ",(0,n.yg)("strong",{parentName:"li"},"Presence Intent"),", ",(0,n.yg)("strong",{parentName:"li"},"Server Members Intent"),", and ",(0,n.yg)("strong",{parentName:"li"},"Message Content Intent"),")."),(0,n.yg)("li",{parentName:"ol"},"Click ",(0,n.yg)("strong",{parentName:"li"},"Save Changes")," at the bottom of the page."),(0,n.yg)("li",{parentName:"ol"},"Redeploy your Node-RED flow.")),(0,n.yg)("h3",{id:"discordapierror50001-missing-access"},"DiscordAPIError","[","50001","]",": Missing Access"),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/Watcher_Discord_Node_Red/Node_RED_Error_2.png",style:{width:1e3,height:"auto"}})),(0,n.yg)("p",null,"This error suggests that your bot doesn't have the necessary permissions to perform the action. To resolve this:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Ensure your bot has been invited to the server with the correct permissions:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Go to the ",(0,n.yg)("a",{parentName:"li",href:"https://discord.com/developers/applications"},(0,n.yg)("strong",{parentName:"a"},"Discord Developer Portal")),"."),(0,n.yg)("li",{parentName:"ul"},"Select your application and go to the ",(0,n.yg)("strong",{parentName:"li"},"OAuth2")," section."),(0,n.yg)("li",{parentName:"ul"},"In ",(0,n.yg)("strong",{parentName:"li"},"URL Generator"),", select ",(0,n.yg)("strong",{parentName:"li"},"bot")," under ",(0,n.yg)("strong",{parentName:"li"},"SCOPES"),"."),(0,n.yg)("li",{parentName:"ul"},"Under ",(0,n.yg)("strong",{parentName:"li"},"BOT PERMISSIONS"),", select the permissions your bot needs (at minimum, ",(0,n.yg)("strong",{parentName:"li"},"Send Messages")," and ",(0,n.yg)("strong",{parentName:"li"},"View Channels"),")."),(0,n.yg)("li",{parentName:"ul"},"Copy the generated URL and open it in a new tab to invite the bot to your server with these permissions.")),(0,n.yg)("ol",{start:2},(0,n.yg)("li",{parentName:"ol"},"Check the channel permissions:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"In Discord, right-click on the channel you're trying to send messages to."),(0,n.yg)("li",{parentName:"ul"},"Click ",(0,n.yg)("strong",{parentName:"li"},"Edit Channel")," > ",(0,n.yg)("strong",{parentName:"li"},"Permissions"),"."),(0,n.yg)("li",{parentName:"ul"},"Ensure your bot role has the necessary permissions, especially ",(0,n.yg)("strong",{parentName:"li"},"View Channel")," and ",(0,n.yg)("strong",{parentName:"li"},"Send Messages"),".")),(0,n.yg)("ol",{start:3},(0,n.yg)("li",{parentName:"ol"},"Verify the Channel ID:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Double-check that the Channel ID in your Node-RED configuration is correct."),(0,n.yg)("li",{parentName:"ul"},"Ensure you're using the ID of a text channel, not a voice channel or category.")),(0,n.yg)("ol",{start:4},(0,n.yg)("li",{parentName:"ol"},"Check your bot token:")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Ensure the token in your Node-RED configuration is correct and up-to-date."),(0,n.yg)("li",{parentName:"ul"},"If unsure, you can regenerate the token in the Discord Developer Portal under the ",(0,n.yg)("strong",{parentName:"li"},"Bot")," section.")),(0,n.yg)("ol",{start:5},(0,n.yg)("li",{parentName:"ol"},"Redeploy your Node-RED flow after making these changes.")),(0,n.yg)("p",null,"If you continue to experience issues after trying these steps, consider checking the ",(0,n.yg)("a",{parentName:"p",href:"https://discord.com/developers/docs/reference"},(0,n.yg)("strong",{parentName:"a"},"Discord API documentation"))," or seeking help in the ",(0,n.yg)("a",{parentName:"p",href:"https://discord.com/invite/discord-developers"},(0,n.yg)("strong",{parentName:"a"},"Discord developer community"))," for more specific troubleshooting."),(0,n.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,n.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,n.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,n.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}g.isMDXComponent=!0}}]);