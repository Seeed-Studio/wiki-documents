"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[34949],{15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>y});var n=a(96540);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),g=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=g(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=g(a),u=l,y=d["".concat(s,".").concat(u)]||d[u]||c[u]||o;return a?n.createElement(y,i(i({ref:t},p),{},{components:a})):n.createElement(y,i({ref:t},p))}));function y(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,i=new Array(o);i[0]=u;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[d]="string"==typeof e?e:l,i[1]=r;for(var g=2;g<o;g++)i[g]=a[g];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},42821:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>r,toc:()=>g});var n=a(58168),l=(a(96540),a(15680));const o={description:"Update Jetson Linux Over-the-Air Using Allxon",title:"OTA Update NVIDIA Jetson Using Allxon",keywords:["Sorftware Allxon"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Update-Jetson-Linux-OTA-Using-Allxon",last_update:{date:"1/13/2023",author:"jianjing Huang"}},i="Update Jetson Linux Over-the-Air Using Allxon",r={unversionedId:"Edge/NVIDIA_Jetson/Application/Managed_Services/Update-Jetson-Linux-OTA-Using-Allxon",id:"Edge/NVIDIA_Jetson/Application/Managed_Services/Update-Jetson-Linux-OTA-Using-Allxon",title:"OTA Update NVIDIA Jetson Using Allxon",description:"Update Jetson Linux Over-the-Air Using Allxon",source:"@site/docs/Edge/NVIDIA_Jetson/Application/Managed_Services/Update-Jetson-Linux-OTA-Using-Allxon.md",sourceDirName:"Edge/NVIDIA_Jetson/Application/Managed_Services",slug:"/Update-Jetson-Linux-OTA-Using-Allxon",permalink:"/Update-Jetson-Linux-OTA-Using-Allxon",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/NVIDIA_Jetson/Application/Managed_Services/Update-Jetson-Linux-OTA-Using-Allxon.md",tags:[],version:"current",lastUpdatedBy:"jianjing Huang",lastUpdatedAt:1673568e3,formattedLastUpdatedAt:"Jan 13, 2023",frontMatter:{description:"Update Jetson Linux Over-the-Air Using Allxon",title:"OTA Update NVIDIA Jetson Using Allxon",keywords:["Sorftware Allxon"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Update-Jetson-Linux-OTA-Using-Allxon",last_update:{date:"1/13/2023",author:"jianjing Huang"}},sidebar:"ProductSidebar",previous:{title:"Getting Started with Scailable",permalink:"/Scailable-Jetson-Getting-Started"},next:{title:"Getting Started with alwaysAI",permalink:"/alwaysAI-Jetson-Getting-Started"}},s={},g=[{value:"Introduction",id:"introduction",level:2},{value:"Workflow",id:"workflow",level:2},{value:"Hardware supported",id:"hardware-supported",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Getting started",id:"getting-started",level:2},{value:"Generate OTA Payload Package and upload to Allxon DMS Portal",id:"generate-ota-payload-package-and-upload-to-allxon-dms-portal",level:3},{value:"Initial Preparation - Base BSP",id:"initial-preparation---base-bsp",level:4},{value:"Initial Preparation - Target BSP",id:"initial-preparation---target-bsp",level:4},{value:"Auto-install Agent mechanism in Target BSP",id:"auto-install-agent-mechanism-in-target-bsp",level:4},{value:"Story",id:"story",level:5},{value:"Solution 1 - Auto-install Enterprise Agent",id:"solution-1---auto-install-enterprise-agent",level:5},{value:"Solution 2 - Resume Device Data",id:"solution-2---resume-device-data",level:5},{value:"Generate the OTA payload package",id:"generate-the-ota-payload-package",level:4},{value:"Prepare the OTA Payload Package zip file for uploading",id:"prepare-the-ota-payload-package-zip-file-for-uploading",level:4},{value:"Upload the OTA Payload Package zip file",id:"upload-the-ota-payload-package-zip-file",level:4},{value:"Perform OTA Payload Package Update via Allxon DMS Portal",id:"perform-ota-payload-package-update-via-allxon-dms-portal",level:3},{value:"Uninstall Allxon DMS from Jetson device",id:"uninstall-allxon-dms-from-jetson-device",level:2}],p={toc:g},d="wrapper";function c(e){let{components:t,...a}=e;return(0,l.yg)(d,(0,n.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,l.yg)("h1",{id:"update-jetson-linux-over-the-air-using-allxon"},"Update Jetson Linux Over-the-Air Using Allxon"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/thumb.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("h2",{id:"introduction"},"Introduction"),(0,l.yg)("p",null,'Generally, NVIDIA provides "OTA Payload Package Update" mechanism which allows users to update their Jetson devices to newer versions of JetPack. Eventhough it seems convenient to update the OS of Jetson devices, there is an additional effort which users need to make. That is, users need to host an OTA server to deliver the OTA Payload Package to Jetson devices. It will be a huge effort for users to handle in addition to generating the OTA Payload Package.'),(0,l.yg)("p",null,"Now, you do not need to worry about that. ",(0,l.yg)("a",{parentName:"p",href:"https://www.allxon.com"},"Allxon")," can assist you to deliver the OTA Payload Package to the Jetson devices via the Allxon DMS Portal. For users or manufactures who are in charge of generating the OTA Payload Package, it's very easy to upload the OTA Payload Package. For users who want to execute the OTA Payload Package update for Jetson devices, it is easy to distribute new versions of OTA Payload Package for fleet of devices as well. All of the above are well explained step-by-step in this wiki. So, follow along and start updating your Jetson Devices over-the-air using Allxon!"),(0,l.yg)("h2",{id:"workflow"},"Workflow"),(0,l.yg)("p",null,"The workflow is as follows:"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/20.jpg",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("p",null,"We would like to ask manufactures or developers to provide Allxon the OTA Payload Package to do verification. Why Allxon would like to do that? That is because Allxon want to ensure the OTA Payload Package is workable for corresponding Jetson devices. And the benefit of verification by Allxon is that Allxon can help you to upload the OTA Payload Package and make sure it can work. You will come across this step later in this guide."),(0,l.yg)("h2",{id:"hardware-supported"},"Hardware supported"),(0,l.yg)("p",null,"OTA Payload Package Update using Allxon is supported by the following hardware:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Official Development Kits by NVIDIA:"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"NVIDIA\xae Jetson Xavier\u2122 NX Developer Kit"),(0,l.yg)("li",{parentName:"ul"},"NVIDIA Jetson AGX Xavier Developer Kit"),(0,l.yg)("li",{parentName:"ul"},"NVIDIA Jetson TX2 Developer Kit"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"Carrier Boards by Seeed:"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"Jetson SUB Mini PC"),(0,l.yg)("li",{parentName:"ul"},"A203 Carrier Board"),(0,l.yg)("li",{parentName:"ul"},"A203 (Version 2) Carrier Board"),(0,l.yg)("li",{parentName:"ul"},"A205 Carrier Board"),(0,l.yg)("li",{parentName:"ul"},"A206 Carrier Board")))),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Note:")," When choosing SoMs for the carrier boards above, make sure to use either Jetson Xavier NX or Jetson TX2 NX modules. Jetson Nano modules are not supported by this mechanism."),(0,l.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Any of the above Jetson Devices running JetPack (Base BSP)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://wiki.seeedstudio.com/Allxon-Jetson-Getting-Started"},"Allxon DMS Agent installed")," on the Jetson Device and paired with Allxon DMS Portal"),(0,l.yg)("li",{parentName:"ul"},"Host PC with Ubuntu installed (native system is recommended)"),(0,l.yg)("li",{parentName:"ul"},"HDMI display and keyboard (optional)")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Note:")," Please note that the host PC used for this guide was a machine running Ubuntu 20.04"),(0,l.yg)("h2",{id:"getting-started"},"Getting started"),(0,l.yg)("p",null,"This guide will be divided into 2 main sections. The first section will talk about how you can generate an OTA Payload Package and upload to Allxon DMS Portal. The second section will talk about how you actually perform the OTA Payload Package update to your Jetson Device using Allxon DMS Portal."),(0,l.yg)("p",null,"First of all, let's check the current L4T version installed on the Jetson Device by executing the following"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"cat /etc/nv_tegra_release\n")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/21.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("p",null,"Now we will proceed to update this to L4T 32.6.1"),(0,l.yg)("h3",{id:"generate-ota-payload-package-and-upload-to-allxon-dms-portal"},"Generate OTA Payload Package and upload to Allxon DMS Portal"),(0,l.yg)("p",null,"Before starting to generate the OTA Payload Package, here is some background knowledge:"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("p",{parentName:"li"},"What is an OTA Payload Package?"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"OTA Payload Package is used to update Jetson devices from lower version BSP to newer version."),(0,l.yg)("li",{parentName:"ul"},"It needs to be generated based on ",(0,l.yg)("strong",{parentName:"li"},"BASE BSP")," and ",(0,l.yg)("strong",{parentName:"li"},"Target BSP"),"."),(0,l.yg)("li",{parentName:"ul"},"Which means once the Target BSP is same but BASE BSP is different, the OTA Payload Package will be different."),(0,l.yg)("li",{parentName:"ul"},"Besides, the OTA Payload Package only includes the ",(0,l.yg)("strong",{parentName:"li"},"Delta")," of the files rather than a whole Target BSP image."))),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("p",{parentName:"li"},"What is Allxon's role in this mechanism and flow"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"Allxon DMS can assist you to deliver the OTA Payload Package to the Jetson devices via the DMS Portal."),(0,l.yg)("li",{parentName:"ul"},"Manufactures and Developers just need to upload the OTA Payload Package to Allxon DMS Portal."),(0,l.yg)("li",{parentName:"ul"},"End-users just need to assign correspond OTA Payload Package to the groups on Allxon DMS Portal."))),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("p",{parentName:"li"},"Is there any place that won't be erased on the device after executing OTA Payload Package update?"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"We found that the files under path ",(0,l.yg)("strong",{parentName:"li"},'"/ota'),"\" won't be erased after OTA Payload Package update."),(0,l.yg)("li",{parentName:"ul"},"It will be a place that users can backup the important data and resume them during the OTA Payload Package process.")))),(0,l.yg)("h4",{id:"initial-preparation---base-bsp"},"Initial Preparation - Base BSP"),(0,l.yg)("p",null,"As mentioned before, OTA Payload Package is generated based on the Base BSP and Target BSP. So we need to prepare the Base BSP and Target BSP before generating the OTA Payload Package. How do you choose which Base BSP you need to prepare? Well, it is based on which device you want to update. For example, if you want to update an Xavier NX device running JetPack version 4.4.4, then you need to prepare Base BSP as JetPack version 4.4.4 for Xavier NX."),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 1.")," Choose the L4T release ",(0,l.yg)("a",{parentName:"p",href:"https://developer.nvidia.com/embedded/linux-tegra-archive"},"from here")," according to the version currently installed on the Jetson device")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 2.")," Download L4T Driver Package (BSP) and Sample Root Filesystem according to your board"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/1.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 3.")," Place both files in the same directory")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/2.png",alt:"pir",width:"500",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 4.")," Open a terminal window, navigate to the above directory and extract L4T Driver Package (BSP)")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"sudo tar -vxjf <Base_BSP_file_name>.tbz2\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 5.")," Navigate to the ",(0,l.yg)("strong",{parentName:"li"},"rootfs directory")," of the extracted NVIDIA driver package")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"cd <Base_BSP_L4T_root>/Linux_for_Tegra/rootfs\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 6.")," Extract the sample file system to the rootfs directory")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"sudo tar -jxpf ../../<rootfs_file_name>.tbz2\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 7.")," Run the apply_binaries.sh script to copy the NVIDIA user space libraries into the target file system")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"cd ..\nsudo ./apply_binaries.sh\n")),(0,l.yg)("h4",{id:"initial-preparation---target-bsp"},"Initial Preparation - Target BSP"),(0,l.yg)("p",null,"Next we will prepare the Target BSP. This will be the BSP that is going to be updated on the device."),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 1.")," Follow from ",(0,l.yg)("strong",{parentName:"p"},"step 1 - step 7")," from the ",(0,l.yg)("strong",{parentName:"p"},"Initial Preparation - Base BSP")," section above, but this time download the necessary files according to the BSP that is going to be updated on the device")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 2.")," Navigate to the ",(0,l.yg)("strong",{parentName:"p"},"rootfs/etc/init.d directory")," of Target BSP"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"cd <Target_BSP_L4T_root>/Linux_for_Tegra/rootfs/etc/init.d\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 3.")," Create a new file named ",(0,l.yg)("strong",{parentName:"li"},"install_allxon_dms.sh"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"sudo nano install_allxon_dms.sh\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Note:")," You can use any text editor above. Here ",(0,l.yg)("strong",{parentName:"p"},"nano text editor")," is used"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 4.")," Copy the following codes to the file created above")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},'#!/bin/bash\n    \nDOWNLOAD_URL="https://get.allxon.net"\nRESUME_DATA="/ota/resume_data.sh"\n \nSYNCAGENT_FOLDER="/var/lib/SyncAgent"\nAGENT_IN_OTA_SRC_DIR="/ota/agent"\nTRIAL_TAG="${AGENT_IN_OTA_SRC_DIR}/trial.tag"\nTRIAL_AGENT_SN="${AGENT_IN_OTA_SRC_DIR}/agentsn"\n    \nverify_nvidia_jetson() {\n    if [ -f "/etc/nv_tegra_release" ]; then\n        echo "It\'s Jetson platform."\n    else\n        echo "It\'s non-Jetson platform, exit the process."\n        exit 1\n    fi\n}\n   \ncheck_ota_folder() {\n    if [ -d "/ota" ]; then\n        echo "It\'s the case of OTA Payload Package update."\n    else\n        echo "It\'s not OTA Payload Package case."\n        exit 0\n    fi\n}\n \nresume_agent_cache() {\n    echo "Resume Agent\'s cache"\n    mkdir -p "${SYNCAGENT_FOLDER}"\n \n    if [ -d "${AGENT_IN_OTA_SRC_DIR}/SyncAgent" ]; then\n        echo " - Resume ${SYNCAGENT_FOLDER}"\n        cp -r ${AGENT_IN_OTA_SRC_DIR}/SyncAgent/* ${SYNCAGENT_FOLDER}\n    fi\n \n    if [ -f "${TRIAL_AGENT_SN}" ]; then\n        echo " - Resume ${TRIAL_AGENT_SN}"\n        cp ${TRIAL_AGENT_SN} /var\n    fi\n}\n \nremove_agent_cache() {\n    echo "Remove Agent\'s cache"\n \n    if [ -d "${AGENT_IN_OTA_SRC_DIR}" ]; then\n        rm -rf ${AGENT_IN_OTA_SRC_DIR}\n    fi\n}\n  \nresume_data_after_ota() {\n    if [ -f "${RESUME_DATA}" ]; then\n        echo "Find the file ${RESUME_DATA}, start to do data resume."\n        chmod 777 ${RESUME_DATA}\n        bash ${RESUME_DATA}\n        rm ${RESUME_DATA}\n    else\n        echo "No data needs to be resumed, skip the process."\n    fi\n}\n   \ncheck_agent_exists() {\n    dpkg -l | grep "$@"\n}\n \ninstall_agent() {\n    if [ -f "${TRIAL_TAG}" ]; then\n        wget -qO - "$DOWNLOAD_URL/linux/trial" | bash -s -- --upgrade\n    else\n        wget -qO - "$DOWNLOAD_URL/linux/enterprise" | bash -s -- --upgrade\n    fi\n}\n    \ndo_install() {\n    verify_nvidia_jetson\n    check_ota_folder\n    resume_data_after_ota  \n    if check_agent_exists allxon-dms-agent; then\n        echo "Allxon DMS Agent is already installed in the system."\n    else\n        echo "Allxon DMS Agent doesn\'t exist, prepare to install."\n        resume_agent_cache\n        install_agent\n        #remove_agent_cache\n    fi  \n}\n    \ndo_install\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 5.")," Navigate to the ",(0,l.yg)("strong",{parentName:"li"},"rootfs/etc/systemd/system")," directory of Target BSP")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"cd <Target_BSP_L4T_root>/Linux_for_Tegra/rootfs/etc/systemd/system\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 6.")," Create a new file named ",(0,l.yg)("strong",{parentName:"li"},"dms-install.service")," and then copy the following codes to the file")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"[Unit]\nDescription=Service for Auto Install Allxon DMS Agent\nDocumentation=https://dms.allxon.com/\nWants=network-online.target\nAfter=network.target network-online.target\n\n[Service]\nType=simple\nExecStart=/etc/init.d/install_allxon_dms.sh\nStandardOutput=null\nRestart=always\nRestartSec=60\nDefaultStartLimitInterval=3600s\nDefaultStartLimitBurst=10\n\n[Install]\nWantedBy=multi-user.target\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 7.")," Execute the following commands to change file permissions and create a symbolic link for ",(0,l.yg)("strong",{parentName:"li"},"dms-install.service")," of Target BSP")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"sudo chmod 644 ./etc/systemd/system/dms-install.service\nsudo chmod 777 ./etc/init.d/install_allxon_dms.sh\nsudo ln -s /etc/systemd/system/dms-install.service ./etc/systemd/system/multi-user.target.wants/dms-install.service\n")),(0,l.yg)("h4",{id:"auto-install-agent-mechanism-in-target-bsp"},"Auto-install Agent mechanism in Target BSP"),(0,l.yg)("h5",{id:"story"},"Story"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"In most cases, the file systems will be erased to a brand new state after executing the OTA payload package update, and there is only one place which won't be erased, and that is the ",(0,l.yg)("strong",{parentName:"li"},'"/ota"')," folder."),(0,l.yg)("li",{parentName:"ul"},"Now, there is a serious problem. Because the file system is erased, there is no Allxon DMS Agent in the system. How can the devices still connect with Allxon DMS Portal and help users to do remote management after OTA payload package update?"),(0,l.yg)("li",{parentName:"ul"},"Besides, if the users want to resume the device data after OTA payload package update, how can we help them to do that?")),(0,l.yg)("h5",{id:"solution-1---auto-install-enterprise-agent"},"Solution 1 - Auto-install Enterprise Agent"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"In order to let the Jetson devices install the Allxon DMS agent with Enterprise edition after completing the Jetpack update automatically, we need to put the script ",(0,l.yg)("strong",{parentName:"li"},'"install_allxon_dms.sh"')," under system directory ",(0,l.yg)("strong",{parentName:"li"},'"/etc/init.d/'),'" in OTA payload package, and also put the service ',(0,l.yg)("strong",{parentName:"li"},'"dms-install.service"')," in OTA payload package."),(0,l.yg)("li",{parentName:"ul"},"When the device is booting up after OTA payload package update, the script will be executed by the system and then Allxon DMS agent will be installed with Enterprise edition.")),(0,l.yg)("h5",{id:"solution-2---resume-device-data"},"Solution 2 - Resume Device Data"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"For resuming the device data, users should put the data which needs to be resumed under ",(0,l.yg)("strong",{parentName:"li"},'"/ota"')," directory on Jetson devices before executing OTA payload package update."),(0,l.yg)("li",{parentName:"ul"},"Besides, users needs to implement a script to do data resume from ",(0,l.yg)("strong",{parentName:"li"},'"/ota"')," folder, and the script file name should be ",(0,l.yg)("strong",{parentName:"li"},'"resume_data.sh"'),"."),(0,l.yg)("li",{parentName:"ul"},"Once there is a script ",(0,l.yg)("strong",{parentName:"li"},'"resume_data.sh"')," under ",(0,l.yg)("strong",{parentName:"li"},'"/ota"'),", the script ",(0,l.yg)("strong",{parentName:"li"},'"install_allxon_dms.sh"')," will execute ",(0,l.yg)("strong",{parentName:"li"},'"resume_data.sh"')," to help users to resume the data from ",(0,l.yg)("strong",{parentName:"li"},'"/ota"')," folder, and this script will be removed after execution to prevent an infinity loop.")),(0,l.yg)("h4",{id:"generate-the-ota-payload-package"},"Generate the OTA payload package"),(0,l.yg)("p",null,"After both Base BSP and Target BSP are prepared, you only need to use the script we provide to help you to generate the OTA Payload Package. Now, let's do it!"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 1.")," Navigate to the L4T release of the Target BSP ",(0,l.yg)("a",{parentName:"li",href:"https://developer.nvidia.com/embedded/linux-tegra-archive"},"from here")," and click ",(0,l.yg)("strong",{parentName:"li"},"Jetson Platform Over-The-Air Update Tools")," to download it")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/3.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 2.")," Place the downloaded ",(0,l.yg)("strong",{parentName:"li"},'Jetson Platform Over-The-Air Update Tools"(ex. ota_tools_R32.6.1_aarch64.tbz2)')," file inside the same folder as ",(0,l.yg)("strong",{parentName:"li"},"Linux_for_Tegra")," for the Target BSP")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/4.png",alt:"pir",width:"500",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 3.")," Create a new file named ",(0,l.yg)("strong",{parentName:"p"},"generate_ota_payload.sh")," and place it anywhere (it's easier to just place it under the same folder as above)")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 4.")," Copy the following code inside the file"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},'#!/bin/bash\n\nBASE_BSP_PATH="<Base_BSP_L4T_root>/Linux_for_Tegra"\nTOT_BSP_PATH="<Target_BSP_L4T_root>/Linux_for_Tegra"\n \nOTA_TOOL="<ota_tools_file_name>.tbz2"\nJETSON_MODEL="<name of Jetson SoM>"\nBSP_VERSION="<Base_BSP_version--ex:R32-4>"\n \nTARGET_FOLDER="<location of target folder>"\n \necho "1. Export variable BASE_BSP"\nexport BASE_BSP=${BASE_BSP_PATH}\n \necho "2. Export variable ToT_BSP"\nexport ToT_BSP=${TOT_BSP_PATH}\n \necho "3. Install OTA tool to ToT_BSP"\ncd ${ToT_BSP}/../\ntar xpf ${OTA_TOOL}\n \necho "4. Export variable ToT_BSP to TARGET_BSP"\nexport TARGET_BSP=${ToT_BSP}\n \necho "5. Check all exported variables"\necho " - BASE_BSP=${BASE_BSP}"\necho " - ToT_BSP=${ToT_BSP}"\necho " - TARGET_BSP=${TARGET_BSP}"\necho " - JETSON_MODEL=${JETSON_MODEL}"\necho " - BSP_VERSION=${BSP_VERSION}"\n \necho "6. Generate the base recovery image and recovery DTB. Go to TARGET_BSP folder"\ncd ${TARGET_BSP}/\n \nsudo ./tools/ota_tools/version_upgrade/build_base_recovery_image.sh ${JETSON_MODEL} ${BSP_VERSION} ${BASE_BSP} ${BASE_BSP}/rootfs ${TARGET_BSP}\n \necho "7. Generate the OTA update payload package. Go to TARGET_BSP folder"\ncd ${TARGET_BSP}/\n \nsudo ./tools/ota_tools/version_upgrade/l4t_generate_ota_package.sh ${JETSON_MODEL} ${BSP_VERSION}\n \necho "8. Copy ota_payload_package.tar.gz to ${TARGET_FOLDER}"\ncp bootloader/${JETSON_MODEL}/ota_payload_package.tar.gz ${TARGET_FOLDER}\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 5.")," Modify the following variables inside the codes above"),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"BASE_BSP_PATH: Directory path of Base BSP"),(0,l.yg)("li",{parentName:"ul"},"TOT_BSP_PATH: Directory path of Target BSP"),(0,l.yg)("li",{parentName:"ul"},"OTA_TOOL: File name of OTA Tool"),(0,l.yg)("li",{parentName:"ul"},"JETSON_MODEL: Model information (Please use ",(0,l.yg)("a",{parentName:"li",href:"https://docs.nvidia.com/jetson/l4t/index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/quick_start.html#wwpID0EAAPNHA"},"this page")," to find out corresponding model)"),(0,l.yg)("li",{parentName:"ul"},"BSP_VERSION: Version of Base BSP"),(0,l.yg)("li",{parentName:"ul"},"TARGET_FOLDER: Directory path for putting the generated OTA Payload Package"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 6.")," Give ",(0,l.yg)("strong",{parentName:"p"},"generate_ota_payload.sh")," executable permission"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"chmod 777 generate_ota_payload.sh\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 7.")," Execute the script")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"sudo ./generate_ota_payload.sh\n")),(0,l.yg)("p",null,"Now the OTA Payload package will be generated as ",(0,l.yg)("strong",{parentName:"p"},"ota_payload_package.tar.gz")," inside the ",(0,l.yg)("strong",{parentName:"p"},"TARGET_FOLDER")," we defined before"),(0,l.yg)("h4",{id:"prepare-the-ota-payload-package-zip-file-for-uploading"},"Prepare the OTA Payload Package zip file for uploading"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 1.")," Copy previously downloaded ",(0,l.yg)("strong",{parentName:"p"},'Jetson Platform Over-The-Air Update Tools"(ex. ota_tools_R32.6.1_aarch64.tbz2)')," and place it inside the ",(0,l.yg)("strong",{parentName:"p"},"TARGET_FOLDER")," created before")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 2.")," Create a file named ",(0,l.yg)("strong",{parentName:"p"},"run_ota_payload.sh")," inside the ",(0,l.yg)("strong",{parentName:"p"},"TARGET_FOLDER")," and copy the following codes inside"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},'#!/bin/bash\n    \nOTA_TOOL="<ota_tools_file_name>.tbz2"\nOTA_PAYLOAD="ota_payload_package.tar.gz"\n    \nWORK_DIR="/allxon_ota" # OTA payload, tool and script should be put in this folder before updating\nOTA_SRC_DIR="/ota" # Unless the emmc storage is struggle, DO NOT need to modify this path\nTARGET_VERSION="<Target_BSP_version--ex:R32.6.1>"\n  \nDMS_BACKUP_SERVICE="dms-backup.service"\nBACKUP_AGENT_CACHE="backup_agent_cache.sh"\n   \nrelease_space_rm_ota_files() {\n    echo "Release unused files and space..."\n   \n    if [ -f "${OTA_PAYLOAD}" ]; then\n        echo " - Remove ${OTA_PAYLOAD}"\n        sudo rm ${OTA_PAYLOAD}\n    fi\n   \n    if [ -f "${OTA_TOOL}" ]; then\n        echo " - Remove ${OTA_TOOL}"\n        sudo rm ${OTA_TOOL}\n    fi     \n}\n  \nenable_backup_agent_cache() {\n    echo "Enable backup Agent\'s cache service"\n    chmod 777 ${BACKUP_AGENT_CACHE}\n    chmod 644 ${DMS_BACKUP_SERVICE}\n \n    cp ${BACKUP_AGENT_CACHE} /etc/init.d/\n    cp ${DMS_BACKUP_SERVICE} /etc/systemd/system/\n  \n    systemctl daemon-reload\n    systemctl enable ${DMS_BACKUP_SERVICE}\n}\n   \n   \nif [ ! -f "/etc/nv_tegra_release" ]; then\n    sudo echo "Not Supported"\n    exit 1\nfi\n    \nREVISION=$(cat /etc/nv_tegra_release | cut -d "," -f 2 | cut -d " " -f 3 | sed 1q) > /dev/null\n    \nif [ "$REVISION" == "" ]; then\n    echo "Error!"\n    exit 1\nelse\n    if [ "$REVISION" == "$TARGET_VERSION" ]; then\n        echo "Update to JetPack $REVISION success!"\n        release_space_rm_ota_files\n        exit 0\n    else\n        echo "It\'s JetPack $REVISION, need to do update!"\n        enable_backup_agent_cache\n    fi\nfi\n    \necho "1. Create ${OTA_SRC_DIR} directory"\n    \nsudo mkdir -p ${OTA_SRC_DIR}\n    \necho "2. Move ${OTA_PAYLOAD} to ${OTA_SRC_DIR}"\n    \nsudo mv ${OTA_PAYLOAD} ${OTA_SRC_DIR}\n    \necho "3. Extract ${OTA_TOOL}"\n    \ntar -jxvf ${OTA_TOOL}\n    \necho "4. Set variable WORKDIR"\n    \nexport WORKDIR=${WORK_DIR}\n    \necho "WORKDIR=${WORKDIR}"\n    \necho "5. Change directory to ${WORKDIR}/Linux_for_Tegra/tools/ota_tools/version_upgrade"\n    \ncd ${WORKDIR}/Linux_for_Tegra/tools/ota_tools/version_upgrade\n    \necho "6. Execute nv_ota_start.sh"\n    \nsudo ./nv_ota_start.sh /dev/mmcblk0 ${OTA_SRC_DIR}/ota_payload_package.tar.gz\n\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 3."),' Modify the variables of the above "run_ota_payload.sh" script based on the requirement and conditions if necessary'),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"OTA_TOOL (Just make sure the file name is correct or not)"),(0,l.yg)("li",{parentName:"ul"},"OTA_PAYLOAD (Just make sure the file name is correct or not)"),(0,l.yg)("li",{parentName:"ul"},'TARGET_VERSION (According to Target BSP version, format is "Rxx.x.x")'))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 4.")," Create a file named ",(0,l.yg)("strong",{parentName:"p"},"dms-backup.service")," inside the ",(0,l.yg)("strong",{parentName:"p"},"TARGET_FOLDER")," and copy the following codes inside"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"[Unit]\nDescription=Back up Allxon DMS Agent cache during Pre-Shutdown Processes\nDefaultDependencies=no\nBefore=shutdown.target reboot.target halt.target\n \n[Service]\nType=oneshot\nUser=root\nGroup=root\nExecStart=/etc/init.d/backup_agent_cache.sh\n \n[Install]\nWantedBy=halt.target reboot.target shutdown.target\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 5.")," Create a file named ",(0,l.yg)("strong",{parentName:"li"},"backup_agent_cache.sh")," inside the ",(0,l.yg)("strong",{parentName:"li"},"TARGET_FOLDER")," and copy the following codes inside")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},'#!/bin/bash\n \nSYNCAGENT_FOLDER="/var/lib/SyncAgent"\nTRIAL_TAG="/usr/share/allxon-dms-agent/trial.tag"\nTRIAL_AGENT_SN="/var/agentsn"\nAGENT_IN_OTA_SRC_DIR="/ota/agent"\n \nbackup_agent_cache() {\n    echo "Backup Agent\'s cache"\n    sudo mkdir -p "${AGENT_IN_OTA_SRC_DIR}"\n \n    if [ -d "${SYNCAGENT_FOLDER}" ]; then\n        echo " - Copy ${SYNCAGENT_FOLDER}"\n        sudo cp -r ${SYNCAGENT_FOLDER} ${AGENT_IN_OTA_SRC_DIR}\n    fi\n \n    if [ -f "${TRIAL_TAG}" ]; then\n        echo " - Copy ${TRIAL_TAG}"\n        sudo cp ${TRIAL_TAG} ${AGENT_IN_OTA_SRC_DIR}\n \n        if [ -f "${TRIAL_AGENT_SN}" ]; then\n            echo " - Copy ${TRIAL_AGENT_SN}"\n            sudo cp ${TRIAL_AGENT_SN} ${AGENT_IN_OTA_SRC_DIR}\n        fi\n    fi\n}\n \nbackup_agent_cache\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 6.")," Navigate to ",(0,l.yg)("strong",{parentName:"li"},"TARGET_FOLDER")," from a terminal window and execute the following command to create a zip file with the above files included")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"zip ota_payload.zip *\n")),(0,l.yg)("p",null,"Now the ",(0,l.yg)("strong",{parentName:"p"},"TARGET_FOLDER")," will look like below with the generated ",(0,l.yg)("strong",{parentName:"p"},"ota_payload.zip")," file"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/5.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("h4",{id:"upload-the-ota-payload-package-zip-file"},"Upload the OTA Payload Package zip file"),(0,l.yg)("p",null,"After generating the zip file which will be used to do OTA Payload Package, we can start to upload this zip file to Allxon DMS Portal or you own storage."),(0,l.yg)("p",null,"If you would like to ask Allxon to do verification and upload the zip file, you just need to deliver this package to Allxon by ",(0,l.yg)("a",{parentName:"p",href:"https://www.allxon.com/contact"},"contacting them here"),". Then you can skip this section."),(0,l.yg)("p",null,"If you would like to upload the zip file by yourself, please follow the below steps"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 1.")," Visit ",(0,l.yg)("a",{parentName:"li",href:"https://dms.allxon.com/"},"Allxon DMS Portal")," and sign in")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Note:")," Make sure you follow ",(0,l.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Allxon-Jetson-Getting-Started"},"this wiki")," to install Allxon DMS Agent on the Jetson Device and pair it with Allxon DMS Portal"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 2.")," Navigate to ",(0,l.yg)("strong",{parentName:"li"},"Applications")," page and click ",(0,l.yg)("strong",{parentName:"li"},"Register")," to register for a new application")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/6.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},(0,l.yg)("strong",{parentName:"p"},"Step 3.")," Fill in the information as follows and click ",(0,l.yg)("strong",{parentName:"p"},"Next")),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},"Application Name: brand_model_BaseBSP_to_TargetBSP"),(0,l.yg)("li",{parentName:"ul"},"App GUID: brand_model_BaseBSP_to_TargetBSP"),(0,l.yg)("li",{parentName:"ul"},"Platform: Linux")))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/8.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 4.")," Add a description and click ",(0,l.yg)("strong",{parentName:"li"},"Register"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/9.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("p",null,"Now you will see the created application"),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/10.1.png",alt:"pir",width:"650",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 5.")," Click on it and click the ",(0,l.yg)("strong",{parentName:"li"},"+")," sign under ",(0,l.yg)("strong",{parentName:"li"},"Versions")," section")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/11.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 6.")," Add a version number and fill the installation command based on the following 2 scenarios to suit your needs")),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},"If you would like to upload the zip file to Allxon DMS Portal, please use the installation commands as below.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},'mkdir -p /allxon_ota\nunzip -o /var/lib/SyncAgent/download/"Application registered name" -d /allxon_ota/\nchmod 777 /allxon_ota/run_ota_payload.sh\nrm -rf /var/lib/SyncAgent/download/*\ncd /allxon_ota/ && /allxon_ota/run_ota_payload.sh\nshutdown -r +5 "Restart the system to upgrade the JetPack will be started in 5 mins."\n')),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/12.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Note:"),': "Application registered name" should be changed with the application name you created before. For example: ',(0,l.yg)("strong",{parentName:"p"},'"jetson-xavier-nx-devkit-emmc_4.4_to_4.6')),(0,l.yg)("ol",{start:2},(0,l.yg)("li",{parentName:"ol"},"If you would like to upload the zip file to your own storage or site, please use the installation commands as below.")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},'mkdir -p /allxon_ota\nwget -qO /allxon_ota/ota_payload.zip "ota_payload_package_download_url"\nunzip -o /allxon_ota/ota_payload.zip -d /allxon_ota/\nchmod 777 /allxon_ota/run_ota_payload.sh\nrm /allxon_ota/ota_payload.zip\ncd /allxon_ota/ && /allxon_ota/run_ota_payload.sh\nshutdown -r +5 "Restart the system to upgrade the JetPack will be started in 5 mins."\n')),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 7.")," Select the ",(0,l.yg)("strong",{parentName:"li"},"ota_payload.zip")," file generated before to upload it and once the upload is finished, click ",(0,l.yg)("strong",{parentName:"li"},"Create"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/13.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 8.")," Enter a ",(0,l.yg)("strong",{parentName:"li"},"Version Description")," and click ",(0,l.yg)("strong",{parentName:"li"},"Save")," to save the application")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/14.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 9.")," Click the ",(0,l.yg)("strong",{parentName:"li"},"+")," sign under ",(0,l.yg)("strong",{parentName:"li"},"Versions")," section and click ",(0,l.yg)("strong",{parentName:"li"},"Release"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/15.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 10.")," Finally, click ",(0,l.yg)("strong",{parentName:"li"},"Release"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/16.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("p",null,"Now we have succesfully uploaded and released the OTA Payload Package to Allxon DMS Portal. The next step will be to distribute this update to our Jetson Device."),(0,l.yg)("h3",{id:"perform-ota-payload-package-update-via-allxon-dms-portal"},"Perform OTA Payload Package Update via Allxon DMS Portal"),(0,l.yg)("p",null,"Please note the following before proceeding:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Before executing the OTA Payload Package update, please make sure the Jetson device is connected with Ethernet cable during the whole process. Otherwise, the update will fail."),(0,l.yg)("li",{parentName:"ul"},"If the upgrade process failed, you can go to ",(0,l.yg)("strong",{parentName:"li"},"/ota_log")," to find out the log of upgrade process."),(0,l.yg)("li",{parentName:"ul"},"If upgrade process succeeds, the file under folder ",(0,l.yg)("strong",{parentName:"li"},"/ota")," will be kept."),(0,l.yg)("li",{parentName:"ul"},"Please make sure the eMMC or internal storage has available space of ",(0,l.yg)("strong",{parentName:"li"},'"OTA Payload Package * 2.5"')," at least.")),(0,l.yg)("p",null,"Now let's perform the OTA Payload Package Update via Allxon DMS Portal"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 1.")," Navigate to ",(0,l.yg)("strong",{parentName:"li"},"Applications")," page in ",(0,l.yg)("strong",{parentName:"li"},"Allxon DMS Portal")," and click ",(0,l.yg)("strong",{parentName:"li"},"Register"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/6.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 2.")," Click ",(0,l.yg)("strong",{parentName:"li"},"Existing"),", select the OTA Payload Package and click ",(0,l.yg)("strong",{parentName:"li"},"Register"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/25.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 3.")," Click on the newly added application")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/26.png",alt:"pir",width:"600",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 4.")," Click the ",(0,l.yg)("strong",{parentName:"li"},"+")," sign under ",(0,l.yg)("strong",{parentName:"li"},"Versions")," section and click ",(0,l.yg)("strong",{parentName:"li"},"Distribute"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/27.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 2.")," Select the groups which you want to distribute and click ",(0,l.yg)("strong",{parentName:"li"},"Distribute"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/18.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 3.")," Set a ",(0,l.yg)("strong",{parentName:"li"},"Distribution Time")," and click ",(0,l.yg)("strong",{parentName:"li"},"Schedule"))),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/19.png",alt:"pir",width:"400",height:"auto"})),(0,l.yg)("p",null,"Now the Jetson Devices in the selected groups will receive this OTA Payload Package and start the upgrade process."),(0,l.yg)("p",null,"If your Jetson Device is connected to an HDMI display, you will see the following, once the installation is finished."),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/23.jpg",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("p",null,"You will also see the message ",(0,l.yg)("strong",{parentName:"p"},'"Restart the system to upgrade the JetPack will be started in 5 mins."')," once the installation is finished, if you are connected to the Jetson Device via SSH."),(0,l.yg)("p",null,"Now it will reboot after 5 minutes for the upgrade process to start. This is to give some extra time for the user to save any unsaved work. However you can reboot the Jetson Device right after you see the above message."),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 4.")," After the Jetson Device boots up again, you will see a black screen. Wait a couple of minutes and then the device will reboot itself again. Next you will be presented with the initial configuration screen for the new OS, and you need to finish this setup to enter the device again.")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Note:")," It is recommended to connect the Jetson Device to an HDMI diplay and a keyboard to complete the above configuration setup"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Step 5.")," After the setup is finished, and the device boots into Desktop, execute the following command to check whether JetPack version is updated")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"cat /etc/nv_tegra_release\n")),(0,l.yg)("p",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/wiki/Allxon/JetPack-OTA/24.png",alt:"pir",width:"1000",height:"auto"})),(0,l.yg)("p",null,"As you can see, in this case, the L4T has been updated to 32.6.1"),(0,l.yg)("h2",{id:"uninstall-allxon-dms-from-jetson-device"},"Uninstall Allxon DMS from Jetson device"),(0,l.yg)("p",null,"If you would like to uninstall Allxon DMS Agent from your device, please use the below command to disable the auto-install Allxon DMS Agent mechanism (service) first"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl disable dms-install.service\n")),(0,l.yg)("p",null,"After that you can use the below command to uninstall Allxon DMS Agent"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-sh"},'sudo wget -qO - "https://get.allxon.net/linux/uninstall" | sudo bash -s\n')))}c.isMDXComponent=!0}}]);